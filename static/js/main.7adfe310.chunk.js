(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(38)),r(n(40)),r(n(21)),r(n(41)),r(n(42)),r(n(28)),r(n(61)),r(n(43)),r(n(26)),r(n(97)),r(n(27)),r(n(39)),r(n(101))},101:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(102)),i="undefined"!==typeof window;function u(e,t){if(i){var n=o.default.parse(location.search);if(void 0!==n[e])return n[e]}return t[e]}function c(e,t){var n=u(e,t);if(void 0!==n)return Array.isArray(n)?n:[String(n)]}t.getWebConfig=function(e){var t=r({playlists:void 0,hideAlbums:!1,onlyJukebox:!1,colorScheme:void 0,customColors:void 0},e);return{playlists:c("playlists",t),hideAlbums:!!u("hideAlbums",t),onlyJukebox:!!u("onlyJukebox",t),colorScheme:u("colorScheme",t),customColors:t.customColors}}},11:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAJPklEQVR4nO3dXVNT9xrG4ScmCkEFxCnWd7s92P3+n6Z7Rq0drQooAi3BJkD2wW5mtx1BRMhad3Jdp5HlM7PgN+v1n87G9u64AAJcaXoAgLMSLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCBGr+kB+Lz9/f3a3t6u/d9/r+FwWOPxuOmR5kK3263Ffr9Wlpfr1tpa9Xr+RNqks7G96y+hRUajUb1+9ar29vaaHmXudbvdunvvXq2trVWn02l6HEqwWuXTp0/14vnzGo1GTY/CX9y+fbvuP3ggWi3gGlZLHB4e1osXL8SqhT58+FCbGxtNj0EJVmu8ffOmRsNh02Nwgnfv3tXBwUHTY8w9wWqB4XBY29vbTY/BFzjKap5gtcDOx49Nj8AZ7O7u1vHxcdNjzDX3bFtgfzA48bNur1cPHz6shYWFcs33ch0fj+vD+/f14cOHz34+Ho/r4OCgrl+/PuXJmBCsFjjtQvud9fVaWVmZ4jTz7f6DB7W3t3fiPhmNhlUlWE1xStgCpz0U2rt6dYqT0Ol0Tn1Y1PO7zRIsIIZgATEEC4ghWEAMdwln1OHhYe3t7dVgMKjRaFTj8bh63W4tLi7WjZs3q9/vezeOOII1Y4bDYb17+7Z2dnZOvvv49m0tLi7W93fvemSCKII1Qz5ub9fr16/P9DT2p0+f6uXPP9fK6mo9fPiwut3uFCaEbyNYM2Jzc7Pevnnz1T+3u7NTw+Gwnj59Klq0novuM2B3Z+dcsZo4GAzql5cvrWpK6wlWuMPDw3r16tU3b+e3336r7RPeoYO2EKxwW5ubdXR0dCHbevfundUIaDXBCjYejy90Ha3JoxDQVoIVbDAY1OHh4YVuU7BoM8EKdhlL9rZlGeCtra0anLJOGPNJsIJd9NFVVdVhC74EY3Nzs978+mu9eP5ctPgbwaJV/vo82dHRkWjxN4IV7DK+lbjJBQM/9/CraPFXghWs3+9HbPMsTntSX7SYEKxgS0tLF36Utby8fKHbO4uzvFYkWlQJVrROp1Nra2sXtr1erzf1YH3NO5CihWCF+259/cJeWv7+7t26cmV6vxLneWFbtOabYIXr/fm9hd/q5vLyhR6tfcl5V5eoEq15JlgzYGV1te7eu3fun+8vLdXjx4+ntgLpt8RqQrTmk2DNiPX19Xr06NFXn9KtrK5OdS2si4jVhGjNH8GaIbfW1urfP/5Yt27d+uLR0mK/X09++KGePHkSGasJ0ZovVhydMdeuXatHjx/Xvfv3a29vrw4Ggxq24EsoLiNWE5No/evp01paWrqU/4N2EKwZ1ev1/ncRfYoX0k9ymbGaEK354JSQSzWNWE04PZx9gsWlmWasJkRrtgkWl6KJWE2I1uwSLC5ck7GaEK3ZJFhcqDbEakK0Zo9gcWHflNOmWE2I1mwRrDm3s7NT//nppxr+8cc3baeNsZo4Ojqq58+e1f7+ftOj8I0Ea47t7OzULy9f1nA4rGfPnp07Wm2O1cTx8XG9eP5ctMIJ1pyaxGpiNBqdK1oJsZoQrXyCNYf+GauJr41WUqwmJtHyDdeZBGvOnBSribNGKzFWE8fHxzUej5seg3MQrDnypVhNfClaybEim2DNibPGauKkaIkVTRKsOfC1sZr4Z7Q2NzbEikZZXmbGnTdWE5Nord66VVubmxc3GJyDI6wZ9q2xmhiNRmJFKwjWjLqoWEGbCNYMEitmlWDNGLFilgnWDBErZp1gzQixYh4I1gwQK+aFYIUTK+aJYAXb29sTK+aKYAWzrhPzRrCAGIIFxBAsIIZgATEEC4ghWEAMwQJiCBYQQ7CAGNZ0D7ayslLXrl5teoxInU6n6RE4B8EKtrS0VEtLS02PAVPjlBCIIVhADMECYggWEEOwWuDKKXesDg4OpjgJR0dHNRwOT/z8tH3F5XOXsAUWFhZqMBh89rOtzc0aj8e1uLAw5anmz3g8ru3t7To6Ojrx31yzHxolWC1w48aN+vjx44mfv9/amuI0nKTb7dbi4mLTY8w1p4QtsLK6Wleu2BVtt3Z7zQOnDfNX0gLdbrfu3LnT9Bicotvt1vq6fdQ0wWqJ79bX68bNm02PwQkePXpUvZ4rKE0TrJbodDr15MmTuilardLpdOrR48e1vLLS9ChUVWdje3fc9BD833g8rvdbW7WxsXHq3Sou3/UbN+r+/fvV7/ebHoU/CVZLHR8f1+7ubu3//nsNh8M6HttN09Drdmux36/l5WUvlreQYAExXMMCYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEOO/jJ5izESHF+4AAAAASUVORK5CYII="},112:function(e,t,n){"use strict";n.r(t);var r=n(24),a=n.n(r),o=n(32),i=n(4),u=n(5),c=n(9),l=n(6),s=n(8),f=n(0),p=n.n(f),d=n(17),h=n.n(d),b=n(10),g=n(11),m=n.n(g),v=n(1),E=n(2);function y(){var e=Object(v.a)(["\n  position: relative;\n  max-height: 100%;\n\n  ","\n\n  border: var(--jukebox-border-width) solid var(--jukebox-foreground);\n  box-sizing: border-box;\n  padding: 10px;\n"]);return y=function(){return e},e}function k(){var e=Object(v.a)(["\n  &,\n  & *,\n  & a:hover,\n  & a:visited,\n  & a:active {\n    background: none;\n    border: none;\n    bottom: auto;\n    clear: none;\n    cursor: default;\n    display: block;\n    float: none;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: medium;\n    font-style: normal;\n    font-weight: normal;\n    height: auto;\n    left: auto;\n    letter-spacing: normal;\n    line-height: normal;\n    max-height: none;\n    max-width: none;\n    min-height: 0;\n    min-width: 0;\n    overflow: visible;\n    position: static;\n    right: auto;\n    text-align: left;\n    text-decoration: none;\n    text-indent: 0;\n    text-transform: none;\n    top: auto;\n    visibility: visible;\n    white-space: normal;\n    width: auto;\n    z-index: auto;\n  }\n"]);return k=function(){return e},e}function x(){var e=Object(v.a)(["\n  padding-left: calc(2 * var(--jukebox-tab-size));\n  text-align: left;\n\n  @media (max-width: 600px) {\n    padding-left: 0px;\n    text-align: center;\n  }\n"]);return x=function(){return e},e}function j(){var e=Object(v.a)(["\n  flex-grow: 1;\n  ","\n"]);return j=function(){return e},e}function O(){var e=Object(v.a)(["\n  ","\n"]);return O=function(){return e},e}function w(){var e=Object(v.a)(["\n  ","\n"]);return w=function(){return e},e}function C(){var e=Object(v.a)(["\n  ","\n"]);return C=function(){return e},e}function S(){var e=Object(v.a)(["\n  transition-duration: 1s;\n  transition-delay: 0s;\n  transition-timing-function: ease-in-out;\n"]);return S=function(){return e},e}var A=Object(E.a)("div")(S()),P=function(e){return e&&"\n  background-color: var(--jukebox-highlight-background);\n  color: var(--jukebox-highlight-foreground);\n"},T=Object(E.a)("div")(C(),function(e){return P(e.highlight)}),_=Object(E.a)("tr")(w(),function(e){return P(e.highlight)}),L="\n  overflow-x: hidden;\n  overflow-y: auto;\n",B="\n  cursor: pointer;\n  &:hover {\n    background-color: var(--jukebox-foreground);\n    color: var(--jukebox-background);\n  }\n",I="\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: stretch;\n  flex-wrap: no-wrap;\n  flex-grow: 1;\n",D="\n  font-size: 1.5em;\n  height: 2em;\n  width: 2em;\n\n  & i {\n    font-size: 1.5em;\n  }\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: no-wrap;\n",G=function(e){var t=e.currentTarget.getBoundingClientRect();return(e.pageX-t.left)/(t.right-t.left)},N=E.a.div(O(),I),R=E.a.div(j(),L),M=E.a.h1(x()),Y=(E.a.div(k()),E.a.div(y(),I));function W(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: no-wrap;\n"]);return W=function(){return e},e}function V(){var e=Object(v.a)(["\n  width: auto;\n  height: 50px;\n\n  @media (max-width: 600px) {\n    display: none;\n  }\n"]);return V=function(){return e},e}function Q(){var e=Object(v.a)(["\n  ","\n"]);return Q=function(){return e},e}function K(){var e=Object(v.a)(["\n  width: 100%;\n  border-collapse: collapse;\n  color: inherit;\n\n  & th,\n  & td {\n    border-top: 1px solid var(--jukebox-foreground);\n    box-sizing: border-box;\n    padding: 0px 5px;\n    height: 60px;\n  }\n\n  & th {\n    border-top-width: 0px;\n  }\n"]);return K=function(){return e},e}function z(){var e=Object(v.a)([""]);return z=function(){return e},e}function U(){var e=Object(v.a)(["\n  max-height: 100%;\n"]);return U=function(){return e},e}var F=Object(E.a)(N)(U()),H=Object(E.a)(R)(z()),J=E.a.table(K()),X=Object(E.a)(_)(Q(),B),Z=E.a.img(V()),q=E.a.div(W());function $(e,t){return t&&t.custom&&e.splice(5,1),e}var ee=function(e){return{type:"SET_VOLUME",payload:{volume:e}}},te=function(e){return{type:"SET_CURRENT_TRACK",payload:{track:e}}},ne=function(e){return{type:"SET_CURRENT_TRACKLIST",payload:{trackList:e}}},re=function(e){return{type:"SET_SEEK_BY_DELTA",payload:{seekDelta:e}}},ae=function(){return{type:"TOGGLE_IS_PLAYING"}},oe=function(){return{type:"TOGGLE_IS_SHUFFLE"}},ie=function(){return{type:"TOGGLE_IS_REPEAT"}},ue=function(){return{type:"SEEK_NEXT_TRACK"}},ce=function(){return{type:"SEEK_PREV_TRACK"}},le=function(){return{type:"TOGGLE_POPUP_ABOUT"}},se=function(){return{type:"TOGGLE_POPUP_IMAGE"}},fe=function(){return{type:"TOGGLE_POPUP_SEARCH"}},pe=n(7),de=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.player,n=e.setCurrentTrack,r=t.trackList;if(!r)throw new Error("TrackListView should not be rendered in this state!");var a=$(["","title","artist","length","album","track #"],r);return p.a.createElement(F,null,p.a.createElement(M,null,r.name,!r.custom&&p.a.createElement("em",null," (sortable) ")),p.a.createElement(H,null,p.a.createElement(J,null,p.a.createElement("thead",null,p.a.createElement("tr",null,a.map(function(e,t){return p.a.createElement("th",{key:"header-".concat(t)},p.a.createElement(q,null,e))}))),p.a.createElement("tbody",null,r.tracks.map(function(e,a){var o=$([p.a.createElement(Z,{src:e.imageSrc||m.a}),e.title||"(".concat(e.album,")"),Object(b.truncate)(e.artist,20),e.durationDisplay,e.album,e.trackNumberDisplay],r);return p.a.createElement(X,{key:"track-".concat(a),onClick:function(){return n(e)},highlight:e===t.track},o.map(function(e,t){return p.a.createElement("td",{key:"body-".concat(a,"-").concat(t)},p.a.createElement(q,null,e))}))})))))}}]),t}(p.a.Component),he=Object(pe.b)(function(e){return{player:e.player}},{setCurrentTrack:te})(de),be=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,u=new Array(r),s=0;s<r;s++)u[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(u)))).audioElm=new Audio,n.state={tracks:[]},n.test=function(){var e=Object(o.a)(a.a.mark(function e(t){var r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(b.range)(5).map(function(){return t.allSongs.randomTrack().id}),i=["???"].concat(r),Object(b.asyncMap)(i,function(){var e=Object(o.a)(a.a.mark(function e(t){var r,o,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.SongLoader.fromId(t);case 2:r=e.sent,o=new b.Track(r),i=n.state.tracks.concat(o),n.setState({tracks:i});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.Logger.log(Object({NODE_ENV:"production",PUBLIC_URL:"."})),b.Manager.fetch(Object(b.getWebConfig)()).then(function(t){return e.setState({manager:t},function(){return e.test(t)})})}},{key:"render",value:function(){var e=this.state.tracks;new b.Playlist("test playlist",e,!0);return p.a.createElement("div",null,"loaded",p.a.createElement(he,null))}}]),t}(p.a.Component),ge=n(3),me=n(19),ve={manager:void 0},Ee={volume:0,isPlaying:!1,shuffle:!1,repeat:!1,track:void 0,trackList:void 0,browser:void 0,seekPercent:void 0,seekSeconds:void 0,seekDelta:void 0},ye={progressPercent:0,progressTime:0,durationTime:0,collapseRoot:!0,collapseHeader:!1,collapseSidebar:!1,showPopupAbout:!1,showPopupImage:!1,showPopupSearch:!1},ke=Object(me.b)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MANAGER":var n=t.payload.manager;return Object(ge.a)({},e,{manager:n});default:return e}},player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VOLUME":var n=t.payload.volume;return Object(ge.a)({},e,{volume:Math.min(1,Math.max(0,n||0))});case"SET_CURRENT_TRACK":var r=t.payload.track;return!e.track||r&&r.audioSrc!==e.track.audioSrc?Object(ge.a)({},e,{track:r,isPlaying:!0}):e;case"SET_CURRENT_TRACKLIST":var a=t.payload.trackList,o=e.trackList;return!o||a&&o.name!==a.name?Object(ge.a)({},e,{trackList:a,browser:void 0}):e;case"SET_CURRENT_BROWSER":var i=t.payload.browser;return Object(ge.a)({},e,{trackList:void 0,browser:i});case"SET_SEEK_BY_PERCENT":var u=t.payload.seekPercent;return Object(ge.a)({},e,{seekPercent:u});case"SET_SEEK_BY_SECONDS":var c=t.payload.seekSeconds;return Object(ge.a)({},e,{seekSeconds:c});case"SET_SEEK_BY_DELTA":var l=t.payload.seekDelta;return Object(ge.a)({},e,{seekDelta:l});case"RESOLVE_SEEK":return Object(ge.a)({},e,{seekPercent:void 0,seekSeconds:void 0,seekDelta:void 0});case"SET_IS_PLAYING":var s=t.payload.isPlaying;return s&&!e.track&&e.trackList?Object(ge.a)({},e,{track:e.trackList.tracks[0],isPlaying:s}):Object(ge.a)({},e,{isPlaying:s});case"SET_IS_SHUFFLE":var f=t.payload.shuffle;return Object(ge.a)({},e,{shuffle:f});case"SET_IS_REPEAT":var p=t.payload.repeat;return Object(ge.a)({},e,{repeat:p});case"TOGGLE_IS_PLAYING":var d=e.isPlaying;return d||e.track||!e.trackList?Object(ge.a)({},e,{isPlaying:!d}):Object(ge.a)({},e,{track:e.trackList.tracks[0],isPlaying:!d});case"TOGGLE_IS_SHUFFLE":var h=e.shuffle;return Object(ge.a)({},e,{shuffle:!h});case"TOGGLE_IS_REPEAT":var b=e.repeat;return Object(ge.a)({},e,{repeat:!b});case"SEEK_NEXT_TRACK":var g=e.track,m=e.trackList;if(g&&m){var v=m.nextTrack(e,g);return Object(ge.a)({},e,{track:v})}return e;case"SEEK_PREV_TRACK":var E=e.track,y=e.trackList;if(E&&y){var k=y.prevTrack(e,E);return Object(ge.a)({},e,{track:k})}return e;case"TOGGLE_IS_SHUFFLE":var x=e.shuffle;return Object(ge.a)({},e,{shuffle:!x});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUDIO_PROGRESS_DISPLAY":var n=t.payload||{currentTime:0,duration:0},r=n.currentTime,a=n.duration;return Object(ge.a)({},e,{progressPercent:a?r/a:0,progressTime:r||0,durationTime:a||0});case"TOGGLE_COLLAPSE_ROOT":return Object(ge.a)({},e,{collapseRoot:!e.collapseRoot});case"TOGGLE_COLLAPSE_HEADER":return Object(ge.a)({},e,{collapseHeader:!e.collapseHeader});case"TOGGLE_COLLAPSE_SIDEBAR":return Object(ge.a)({},e,{collapseSidebar:!e.collapseSidebar});case"TOGGLE_POPUP_ABOUT":return Object(ge.a)({},e,{showPopupAbout:!e.showPopupAbout});case"TOGGLE_POPUP_IMAGE":return Object(ge.a)({},e,{showPopupImage:!e.showPopupImage});case"TOGGLE_POPUP_SEARCH":return Object(ge.a)({},e,{showPopupSearch:!e.showPopupSearch});default:return e}}}),xe=Object(me.c)(ke);function je(){var e=Object(v.a)(["\n  font-size: 1.5em;\n  font-weight: bold;\n"]);return je=function(){return e},e}function Oe(){var e=Object(v.a)(["\n  font-size: 1.5em;\n  font-style: italic;\n"]);return Oe=function(){return e},e}function we(){var e=Object(v.a)(["\n  font-size: 2.5em;\n  font-weight: bold;\n"]);return we=function(){return e},e}function Ce(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  margin: 0px 20px;\n  text-align: center;\n"]);return Ce=function(){return e},e}function Se(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  flex-grow: 1;\n"]);return Se=function(){return e},e}function Ae(){var e=Object(v.a)(["\n  cursor: pointer;\n"]);return Ae=function(){return e},e}function Pe(){var e=Object(v.a)(["\n  width: auto;\n  height: calc(var(--jukebox-sidebar-width) - var(--jukebox-frame-gap));\n\n  @media (max-width: 600px){\n    width: 100%;\n    height: auto;\n  }\n"]);return Pe=function(){return e},e}function Te(){var e=Object(v.a)(["\n  ","\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-grow: 0;\n"]);return Te=function(){return e},e}function _e(){var e=Object(v.a)(["\n  width: 100%;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: stretch;\n  flex-wrap: no-wrap;\n\n  @media (max-width: 600px){\n    flex-direction: column;\n  }\n"]);return _e=function(){return e},e}var Le=E.a.div(_e()),Be=E.a.div(Te(),I),Ie=E.a.img(Pe()),De=Object(E.a)(Ie)(Ae()),Ge=E.a.div(Se()),Ne=E.a.div(Ce()),Re=Object(E.a)(Ne)(we()),Me=Object(E.a)(Ne)(Oe()),Ye=Object(E.a)(Ne)(je()),We=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.player.track;return e?p.a.createElement(Le,null,p.a.createElement(Be,null,p.a.createElement(De,{src:e.imageSrc||m.a,onClick:this.props.togglePopupImage})),p.a.createElement(Ge,null,p.a.createElement(Re,null,e.title||"(".concat(e.album,")")),p.a.createElement(Me,null,Object(b.truncate)(e.artist,80)),p.a.createElement(Ye,null,e.album))):p.a.createElement(Le,null,p.a.createElement(Be,null,p.a.createElement(Ie,{src:m.a})),p.a.createElement(Ge,null,"Click on a track to start playing"))}}]),t}(p.a.Component),Ve=Object(pe.b)(function(e){return{player:e.player}},{togglePopupImage:se})(We);function Qe(){var e=Object(v.a)(["\n  ","\n  box-sizing: border-box;\n  padding: 5px;\n"]);return Qe=function(){return e},e}function Ke(){var e=Object(v.a)(["\n  ","\n"]);return Ke=function(){return e},e}function ze(){var e=Object(v.a)(["\n  padding-bottom: 5px;\n  border-bottom: 1px solid var(--jukebox-foreground);\n  margin-bottom: 5px;\n"]);return ze=function(){return e},e}function Ue(){var e=Object(v.a)(["\n  ","\n  ","\n"]);return Ue=function(){return e},e}var Fe=E.a.div(Ue(),I,L),He=E.a.div(ze()),Je=E.a.div(Ke(),L),Xe=Object(E.a)(T)(Qe(),B),Ze=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.player,r=e.setCurrentTrackList,a=e.setCurrentBrowser,o=e.togglePopupSearch,i=t.manager;if(!i)throw new Error("PlaylistMenu should not be rendered in this state!");return p.a.createElement(Fe,null,!i.webConfig.hideAlbums&&p.a.createElement(He,null,p.a.createElement(Xe,{onClick:o},"Search"),p.a.createElement(Xe,{onClick:function(){return r(i.allSongs)},highlight:i.allSongs===n.trackList},i.allSongs.name),p.a.createElement(Xe,{onClick:function(){return a(i.browseAlbums)},highlight:i.browseAlbums===n.browser},i.browseAlbums.name),p.a.createElement(Xe,{onClick:function(){return a(i.browseArtists)},highlight:i.browseArtists===n.browser},i.browseArtists.name)),p.a.createElement(Je,null,i.playlists.map(function(e,t){return p.a.createElement(Xe,{key:"playlist-name-".concat(t),onClick:function(){return r(e)},highlight:e===n.trackList},e.name)})))}}]),t}(p.a.Component),qe=Object(pe.b)(function(e){return{data:e.data,player:e.player}},{setCurrentTrackList:ne,setCurrentBrowser:function(e){return{type:"SET_CURRENT_BROWSER",payload:{browser:e}}},togglePopupSearch:fe})(Ze);function $e(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n\n  text-align: center;\n  margin: 2px 0px;\n\n  &:first-child {\n    margin-bottom: 8px;\n  }\n"]);return $e=function(){return e},e}function et(){var e=Object(v.a)(["\n  width: 90%;\n  height: auto;\n"]);return et=function(){return e},e}function tt(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: no-wrap;\n\n  width: 20%;\n  padding: 5px;\n  box-sizing: border-box;\n\n  cursor: pointer;\n  &:hover {\n    border: 1px solid grey;\n    border-radius: 5px;\n    padding: 4px;\n  }\n\n  @media (max-width: 600px) {\n    width: 50%;\n  }\n"]);return tt=function(){return e},e}function nt(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]);return nt=function(){return e},e}function rt(){var e=Object(v.a)(["\n  max-height: 100%;\n"]);return rt=function(){return e},e}var at=Object(E.a)(N)(rt()),ot=Object(E.a)(R)(nt()),it=E.a.div(tt()),ut=E.a.img(et()),ct=E.a.div($e()),lt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(u.a)(t,[{key:"truncate",value:function(e){return(e||"").substring(0,20)}},{key:"render",value:function(){var e=this.props,t=e.player,n=e.setCurrentTrackList,r=t.browser;if(!r)throw new Error("BrowserView should not be rendered in this state!");return p.a.createElement(at,null,p.a.createElement(M,null,r.name),p.a.createElement(ot,null,r.playlists.map(function(e,t){return p.a.createElement(it,{key:"playlist-".concat(t),onClick:function(){return n(e)}},p.a.createElement(ct,null,p.a.createElement(ut,{src:e.imageSrc||m.a})),p.a.createElement(ct,null,p.a.createElement("b",null,e.album||"???")),p.a.createElement(ct,null,e.artist||"???"))})))}}]),t}(p.a.Component),st=Object(pe.b)(function(e){return{player:e.player}},{setCurrentTrackList:ne})(lt);function ft(){var e=Object(v.a)(["\n  ","\n\n  width: var(--jukebox-tab-size);\n  height: var(--jukebox-tab-size);\n\n  justify-content: center;\n  align-items: center;\n"]);return ft=function(){return e},e}function pt(){var e=Object(v.a)(["\n  color: var(--jukebox-foreground);\n  background-color: var(--jukebox-background);\n\n  z-index: 1;\n  position: absolute;\n\n  border: var(--jukebox-border-width) solid var(--jukebox-foreground);\n  box-sizing: border-box;\n\n  ","\n\n  ","\n"]);return pt=function(){return e},e}var dt=Object(E.a)(A)(pt(),function(e){return e.isCollapsed?"\n    ".concat([e.box.tightSide,e.box.outerSide].map(function(e){return"\n      ".concat(e,": 0px;\n    ")}).join(""),"\n    ").concat([e.box.gapSide,e.box.innerSide].map(function(e){return"\n      ".concat(e,": auto;\n    ")}).join(""),"\n\n    ").concat(e.box.outerSide,": calc(0px - (\n      (2 * var(--jukebox-border-width)) +\n      (2 * var(--jukebox-frame-gap)) +\n      var(--jukebox-tab-size)\n    ));\n\n    ").concat([e.box.tightSide,e.box.innerSide].map(function(e){return"\n      margin-".concat(e,": calc(0px - var(--jukebox-border-width));\n      padding-").concat(e,": 0px;\n      border-").concat(e,"-width: 0px;\n    ")}).join(""),"\n    ").concat([e.box.gapSide,e.box.outerSide].map(function(e){return"\n      margin-".concat(e,": 0px;\n      padding-").concat(e,": var(--jukebox-frame-gap);\n      border-").concat(e,"-width: var(--jukebox-border-width);\n    ")}).join(""),"\n  "):"\n    ".concat([e.box.tightSide,e.box.outerSide].map(function(e){return"\n      ".concat(e,": 0px;\n      margin-").concat(e,": calc(0px - var(--jukebox-border-width));\n      padding-").concat(e,": 0px;\n      border-").concat(e,"-width: 0px;\n    ")}).join(""),"\n    ").concat([e.box.gapSide,e.box.innerSide].map(function(e){return"\n      ".concat(e,": auto;\n      margin-").concat(e,": 0px;\n      padding-").concat(e,": var(--jukebox-frame-gap);\n      border-").concat(e,"-width: var(--jukebox-border-width);\n    ")}).join(""),"\n  ")},function(e){return e.box.hideOnMobile&&"\n    @media (max-width: 600px) {\n      display: none;\n    }\n  "}),ht=Object(E.a)(Y)(ft(),B),bt=function(e,t){return function(n){var r=n.onClick,a=n.isCollapsed;return p.a.createElement(t,{isCollapsed:a,box:e},p.a.createElement(ht,{onClick:r},a?e.collapsedText:e.openText))}},gt=bt({hideOnMobile:!1,openText:"X",collapsedText:"",innerSide:"bottom",outerSide:"top",gapSide:"left",tightSide:"right"},dt),mt=bt({hideOnMobile:!0,openText:"\u25b2",collapsedText:"\u25bc",innerSide:"top",outerSide:"bottom",gapSide:"left",tightSide:"right"},dt),vt=bt({hideOnMobile:!0,openText:"\u25c4",collapsedText:"\u25ba",innerSide:"left",outerSide:"right",gapSide:"bottom",tightSide:"top"},dt);function Et(){var e=Object(v.a)(["\n  ","\n"]);return Et=function(){return e},e}function yt(){var e=Object(v.a)(["\n  position: absolute;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  height: 30px;\n  width: 10px;\n  background-color: var(--jukebox-background);\n  border: var(--jukebox-border-width) solid var(--jukebox-foreground);\n"]);return yt=function(){return e},e}function kt(){var e=Object(v.a)(["\n  cursor: pointer;\n  height: 10px;\n  width: 100px;\n  border: var(--jukebox-border-width) solid var(--jukebox-foreground);\n  box-sizing: border-box;\n\n  background: linear-gradient(\n    to right,\n    var(--jukebox-background),\n    var(--jukebox-foreground)\n  );\n\n  position: relative;\n"]);return kt=function(){return e},e}function xt(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: no-wrap;\n"]);return xt=function(){return e},e}var jt=E.a.div(xt()),Ot=E.a.div(kt()),wt=E.a.div.attrs(function(e){return{style:{left:"".concat(100*e.percent,"%")}}})(yt()),Ct=E.a.div(Et(),D),St=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).setVolume=function(e){n.props.setVolume(G(e))},n.onBarDrag=function(e){n.props.setVolume(G(e))},n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.player.volume,t="volume_off";return e>.6?t="volume_up":e>.3?t="volume_down":e>0&&(t="volume_mute"),p.a.createElement(jt,null,p.a.createElement(Ot,{onClick:this.setVolume,onDragOver:this.onBarDrag},p.a.createElement(wt,{draggable:!0,percent:e})),p.a.createElement(Ct,null,p.a.createElement("i",{className:"material-icons"},t)))}}]),t}(p.a.Component),At=Object(pe.b)(function(e){return{player:e.player}},{setVolume:ee})(St);function Pt(){var e=Object(v.a)(["\n  ","\n  ","\n\n  border: 1px solid var(--jukebox-foreground);\n  border-radius: 5px;\n  margin: 5px;\n"]);return Pt=function(){return e},e}function Tt(){var e=Object(v.a)(["\n  flex-grow: 1;\n"]);return Tt=function(){return e},e}function _t(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n"]);return _t=function(){return e},e}function Lt(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: no-wrap;\n\n  @media (max-width: 600px) {\n    flex-direction: column;\n  }\n"]);return Lt=function(){return e},e}var Bt=E.a.div(Lt()),It=E.a.div(_t()),Dt=Object(E.a)(It)(Tt()),Gt=Object(E.a)(T)(Pt(),B,D),Nt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.player;return p.a.createElement(Bt,null,p.a.createElement(It,null,p.a.createElement(Gt,{onClick:this.props.togglePopupAbout},"?"),p.a.createElement(At,null)),p.a.createElement(Dt,null,p.a.createElement(Gt,{onClick:function(){return e.props.setSeekByDelta(-10)}},p.a.createElement("i",{className:"material-icons"},"replay_10")),p.a.createElement(Gt,{onClick:this.props.seekPrevTrack},p.a.createElement("i",{className:"material-icons"},"skip_previous")),p.a.createElement(Gt,{onClick:this.props.toggleIsPlaying},t.isPlaying?p.a.createElement("i",{className:"material-icons"},"pause_circle_outline"):p.a.createElement("i",{className:"material-icons"},"play_circle_outline")),p.a.createElement(Gt,{onClick:this.props.seekNextTrack},p.a.createElement("i",{className:"material-icons"},"skip_next")),p.a.createElement(Gt,{onClick:function(){return e.props.setSeekByDelta(10)}},p.a.createElement("i",{className:"material-icons"},"forward_10"))),p.a.createElement(It,null,p.a.createElement(Gt,{onClick:this.props.toggleIsShuffle,highlight:t.shuffle},p.a.createElement("i",{className:"material-icons"},"shuffle")),p.a.createElement(Gt,{onClick:this.props.toggleIsRepeat,highlight:t.repeat},p.a.createElement("i",{className:"material-icons"},"repeat"))))}}]),t}(p.a.Component),Rt=Object(pe.b)(function(e){return{player:e.player}},{seekNextTrack:ue,seekPrevTrack:ce,setSeekByDelta:re,toggleIsPlaying:ae,toggleIsShuffle:oe,toggleIsRepeat:ie,togglePopupAbout:le})(Nt),Mt={light:{foreground:"black",background:"white",highlightForeground:"black",highlightBackground:"lightgrey"},dark:{foreground:"white",background:"black",highlightForeground:"white",highlightBackground:"#404040"}};Mt.default=Mt.light;var Yt=function(e){var t=e.colorScheme,n=e.customColors,r=t&&Mt[t]||Mt.default;return Object(ge.a)({},r,n||{})},Wt=n(15),Vt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).audioElm=new Audio,n.ensurePlaying=function(){var e=Object(Wt.a)(Object(Wt.a)(n)).audioElm;n.props.player.isPlaying?e.play():e.pause()},n.onProgress=function(e){var t=Object(Wt.a)(Object(Wt.a)(n)).audioElm;n.props.setAudioProgressDisplay(t.currentTime,t.duration)},n.onTrackEnd=function(e){n.props.player.repeat?n.audioElm.play():n.props.seekNextTrack()},n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.audioElm;e.addEventListener("timeupdate",this.onProgress),e.addEventListener("ended",this.onTrackEnd),["https://fonts.googleapis.com/icon?family=Material+Icons"].forEach(function(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),document.head.appendChild(t)}),this.props.setVolume(.8)}},{key:"componentDidUpdate",value:function(e){var t,n=this.audioElm,r=this.props.player,a=r.volume,o=r.track,i=r.seekPercent,u=r.seekSeconds,c=r.seekDelta;void 0!==a&&a!==e.player.volume&&(n.volume=a),o&&o!==e.player.track&&(n.src=o.audioSrc),this.ensurePlaying(),void 0!==i?t=i*n.duration:void 0!==u?t=u:c&&(t=n.currentTime+c),void 0!==t&&(isNaN(t)||(n.currentTime=t),this.props.resolveSeek())}},{key:"render",value:function(){return""}}]),t}(p.a.Component),Qt=Object(pe.b)(function(e){return{player:e.player}},{resolveSeek:function(){return{type:"RESOLVE_SEEK"}},setVolume:ee,setCurrentTrack:te,seekNextTrack:ue,setAudioProgressDisplay:function(e,t){return{type:"SET_AUDIO_PROGRESS_DISPLAY",payload:{currentTime:e,duration:t}}}})(Vt);function Kt(){var e=Object(v.a)(["\n  font-size: 3em;\n  font-weight: bold;\n  margin-bottom: 0.5em;\n"]);return Kt=function(){return e},e}function zt(){var e=Object(v.a)(["\n  max-height: 90%;\n  max-width: 90%;\n  box-sizing: border-box;\n  overflow: hidden;\n\n  background-color: var(--jukebox-background);\n  color: var(--jukebox-foreground);\n  border: 0.5em solid var(--jukebox-foreground);\n  border-radius: 2em;\n  padding: 2em;\n  text-align: center;\n"]);return zt=function(){return e},e}function Ut(){var e=Object(v.a)(["\n  ","\n  justify-content: center;\n  align-items: center;\n\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n\n  z-index: var(--jukebox-popup-z-index);\n\n  background-color: rgba(0,0,0,0.5);\n"]);return Ut=function(){return e},e}var Ft=E.a.div(Ut(),I),Ht=E.a.div(zt()),Jt=E.a.div(Kt());function Xt(){var e=Object(v.a)(["\n  border-collapse: collapse;\n  color: inherit;\n\n  & th,\n  & td {\n    border: 1px solid var(--jukebox-foreground);\n    box-sizing: border-box;\n    padding: 0.5em;\n  }\n"]);return Xt=function(){return e},e}function Zt(){var e=Object(v.a)(["\n  font-size: 1.5em;\n  font-style: italic;\n  margin-top: 1em;\n  margin-bottom: 0.5em;\n"]);return Zt=function(){return e},e}function qt(){var e=Object(v.a)([""]);return qt=function(){return e},e}var $t=E.a.div(qt()),en=E.a.div(Zt()),tn=E.a.table(Xt()),nn=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.ui.showPopupAbout?p.a.createElement(Ft,{onClick:this.props.togglePopupAbout},p.a.createElement(Ht,{onClick:function(e){return e.stopPropagation()}},p.a.createElement(Jt,null,"jukebox"),p.a.createElement($t,null,"made by ",p.a.createElement("a",{href:"https://twitter.com/mpaulweeks"},"@mpaulweeks")),p.a.createElement(en,null,"keyboard shortcuts"),p.a.createElement(tn,null,p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("td",null,"spacebar"),p.a.createElement("td",null,"play/pause the music")),p.a.createElement("tr",null,p.a.createElement("td",null,"+"),p.a.createElement("td",null,"increase volume")),p.a.createElement("tr",null,p.a.createElement("td",null,"-"),p.a.createElement("td",null,"decrease volume")),p.a.createElement("tr",null,p.a.createElement("td",null,"left arrow"),p.a.createElement("td",null,"previous song")),p.a.createElement("tr",null,p.a.createElement("td",null,"right arrow"),p.a.createElement("td",null,"next song")),p.a.createElement("tr",null,p.a.createElement("td",null,"comma"),p.a.createElement("td",null,"skip back 10 seconds")),p.a.createElement("tr",null,p.a.createElement("td",null,"period"),p.a.createElement("td",null,"skip forward 10 seconds")),p.a.createElement("tr",null,p.a.createElement("td",null,"S"),p.a.createElement("td",null,"toggle shuffle")),p.a.createElement("tr",null,p.a.createElement("td",null,"R"),p.a.createElement("td",null,"toggle repeat")))))):""}}]),t}(p.a.Component),rn=Object(pe.b)(function(e){return{ui:e.ui}},{togglePopupAbout:le})(nn);function an(){var e=Object(v.a)(["\n  height: 100%;\n  width: auto;\n "]);return an=function(){return e},e}var on=E.a.img(an()),un=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.player,n=e.ui,r=t.track&&t.track.imageSrc||m.a;return n.showPopupImage?p.a.createElement(Ft,{onClick:this.props.togglePopupImage},p.a.createElement(Ht,{onClick:function(e){return e.stopPropagation()}},p.a.createElement(on,{src:r}))):""}}]),t}(p.a.Component),cn=Object(pe.b)(function(e){return{player:e.player,ui:e.ui}},{togglePopupImage:se})(un);function ln(){var e=Object(v.a)(["\n  font-size: 2rem;\n  padding: 0.2rem;\n"]);return ln=function(){return e},e}function sn(){var e=Object(v.a)(["\n  width: 90%;\n  height: 90%;\n  margin-top: 5vh;\n"]);return sn=function(){return e},e}function fn(){var e=Object(v.a)(["\n  justify-content: flex-start;\n"]);return fn=function(){return e},e}var pn=Object(E.a)(Ft)(fn()),dn=Object(E.a)(Ht)(sn()),hn=E.a.input(ln()),bn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).input=void 0,n.state={results:[]},n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"setRef",value:function(e){e&&(this.input=e)}},{key:"onChange",value:function(){var e=this.props.data.manager,t=this.input&&this.input.value;if(e&&t){var n=e.search(t);this.setState({results:n})}}},{key:"onSelect",value:function(e){this.props.togglePopupSearch(),this.props.setCurrentTrackList(e.playlist),this.props.setCurrentTrack(e.track)}},{key:"render",value:function(){var e=this,t=this.state.results;return this.props.ui.showPopupSearch?p.a.createElement(pn,{onClick:this.props.togglePopupSearch},p.a.createElement(dn,{onClick:function(e){return e.stopPropagation()}},p.a.createElement(Jt,null,"Search"),p.a.createElement(hn,{type:"text",ref:function(t){return e.setRef(t)},onChange:function(){return e.onChange()}}),p.a.createElement(F,null,p.a.createElement(H,null,p.a.createElement(J,null,p.a.createElement("thead",null,p.a.createElement("tr",null,["","title","artist","length","playlist"].map(function(e,t){return p.a.createElement("th",{key:"header-".concat(t)},p.a.createElement(q,null,e))}))),p.a.createElement("tbody",null,t.map(function(t,n){var r=t.track,a=$([p.a.createElement(Z,{src:r.imageSrc||m.a}),r.title||"(".concat(r.album,")"),Object(b.truncate)(r.artist,20),r.durationDisplay,t.playlist.name]);return p.a.createElement(X,{key:"track-".concat(n),onClick:function(){return e.onSelect(t)}},a.map(function(e,t){return p.a.createElement("td",{key:"body-".concat(n,"-").concat(t)},p.a.createElement(q,null,e))}))}))))))):""}}]),t}(p.a.Component),gn=Object(pe.b)(function(e){return{data:e.data,ui:e.ui}},{setCurrentTrackList:ne,setCurrentTrack:te,togglePopupSearch:fe})(bn);function mn(){var e=Object(v.a)(["\n  margin: 0px 10px;\n"]);return mn=function(){return e},e}function vn(){var e=Object(v.a)(["\n  cursor: pointer;\n  height: 30px;\n  border: var(--jukebox-border-width) solid var(--jukebox-foreground);\n  border-radius: 5px;\n  box-sizing: border-box;\n  background: repeating-linear-gradient(\n    135deg,\n    var(--jukebox-highlight-foreground),\n    var(--jukebox-highlight-foreground) 10px,\n    var(--jukebox-highlight-background) 10px,\n    var(--jukebox-highlight-background) 20px\n  );\n  background-repeat: no-repeat;\n  animation: "," 1s linear infinite;\n\n  ","\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n"]);return vn=function(){return e},e}function En(){var e=Object(v.a)(["\n  0% {\n    background-position: 0px 0px;\n  }\n  100% {\n    background-position: 0px -27.5px;\n  }\n"]);return En=function(){return e},e}function yn(){var e=Object(v.a)(["\n  padding: 5px;\n"]);return yn=function(){return e},e}var kn=E.a.div(yn()),xn=Object(E.b)(En()),jn=E.a.div.attrs(function(e){return{style:{backgroundSize:"".concat(100*e.percent,"% 400%")}}})(vn(),xn,I),On=E.a.div(mn()),wn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).setProgress=function(e){n.props.setSeekByPercent(G(e))},n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return p.a.createElement(kn,null,p.a.createElement(jn,{onClick:this.setProgress,percent:this.props.ui.progressPercent},p.a.createElement(On,null,this.renderTime(this.props.ui.progressTime))))}},{key:"renderTime",value:function(e){var t=Math.floor(e/60),n=String(Math.floor(e%60)).padStart(2,"0");return"".concat(t,":").concat(n)}}]),t}(p.a.Component),Cn=Object(pe.b)(function(e){return{ui:e.ui}},{setSeekByPercent:function(e){return{type:"SET_SEEK_BY_PERCENT",payload:{seekPercent:e}}}})(wn);function Sn(){var e=Object(v.a)(["\n  flex-grow: 1;\n"]);return Sn=function(){return e},e}function An(){var e=Object(v.a)(["\n  padding-right: 0px;\n  width: var(--jukebox-sidebar-width);\n  min-width: var(--jukebox-sidebar-width);\n  max-width: var(--jukebox-sidebar-width);\n  ","\n  @media (max-width: 600px) {\n    padding-right: var(--jukebox-frame-gap);\n    padding-bottom: 0px;\n    width: auto;\n    min-width: auto;\n    max-width: none;\n  }\n"]);return An=function(){return e},e}function Pn(){var e=Object(v.a)(["\n  padding-top: 0px;\n"]);return Pn=function(){return e},e}function Tn(){var e=Object(v.a)(["\n  padding-bottom: 0px;\n  ","\n"]);return Tn=function(){return e},e}function _n(){var e=Object(v.a)(["\n  ","\n  padding: var(--jukebox-frame-gap);\n"]);return _n=function(){return e},e}function Ln(){var e=Object(v.a)(["\n  ","\n  flex-direction: row;\n  overflow: hidden;\n\n  @media (max-width: 600px) {\n    flex-direction: column;\n  }\n"]);return Ln=function(){return e},e}function Bn(){var e=Object(v.a)([""]);return Bn=function(){return e},e}function In(){var e=Object(v.a)(["\n  ","\n\n  font-size: 16px;\n  max-height: 100%;\n\n  background-color: var(--jukebox-background);\n  color: var(--jukebox-foreground);\n"]);return In=function(){return e},e}function Dn(){var e=Object(v.a)(["\n  --jukebox-z-index: 2147483646; /* max possible - 1 */\n  --jukebox-popup-z-index: 2147483647; /* max possible */\n  --jukebox-foreground: ",";\n  --jukebox-background: ",";\n  --jukebox-highlight-foreground: ",";\n  --jukebox-highlight-background: ",";\n  --jukebox-border-width: 1px;\n  --jukebox-frame-gap: 10px;\n  --jukebox-tab-size: 50px;\n  --jukebox-sidebar-width: 200px;\n\n  ","\n\n  position: fixed;\n  z-index: var(--jukebox-z-index);\n  width: 100%;\n  height: 100%;\n  top: 0px;\n  left: 0px;\n  ",";\n\n  & a {\n    color: var(--jukebox-foreground);\n  }\n\n  @media (max-width: 600px) {\n    position: absolute;\n    height: auto;\n    top: 0px;\n    ",";\n  }\n"]);return Dn=function(){return e},e}var Gn=Object(E.a)(A)(Dn(),function(e){return e.colorScheme.foreground},function(e){return e.colorScheme.background},function(e){return e.colorScheme.highlightForeground},function(e){return e.colorScheme.highlightBackground},I,function(e){return e.isCollapsed&&"\n    top: -100%;\n  "},function(e){return e.isCollapsed&&"\n      left: -100%;\n    "}),Nn=Object(E.a)("div")(In(),I),Rn=E.a.div(Bn()),Mn=E.a.div(Ln(),I),Yn=Object(E.a)(A)(_n(),I),Wn=Object(E.a)(Yn)(Tn(),function(e){return e.isCollapsed&&"\n    margin-top: calc(0px - (var(--jukebox-sidebar-width) + 2 * (var(--jukebox-frame-gap) + var(--jukebox-border-width))));\n  "}),Vn=Object(E.a)(Yn)(Pn()),Qn=Object(E.a)(Yn)(An(),function(e){return e.isCollapsed&&"\n    margin-left: calc(0px - (var(--jukebox-sidebar-width) + var(--jukebox-frame-gap)));\n  "}),Kn=Object(E.a)(Yn)(Sn()),zn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).webConfig=Object(b.getWebConfig)(n.props.codeConfig),n.state={colorScheme:Yt(n.webConfig)},n.keysHeld={},n}return Object(s.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window;t.JD={app:this,config:this.webConfig,constants:b.Constants},t.JUKEBOX={open:function(){return e.props.ui.collapseRoot&&e.props.toggleCollapseRoot()},close:function(){return!e.props.ui.collapseRoot&&e.props.toggleCollapseRoot()},play:function(){return!e.props.player.isPlaying&&e.props.toggleIsPlaying()},pause:function(){return e.props.player.isPlaying&&e.props.toggleIsPlaying()}},b.Logger.log("JUKEBOX is ready"),this.webConfig.onlyJukebox&&this.props.toggleCollapseRoot(),window.addEventListener("focus",function(t){e.keysHeld={}}),document.addEventListener("keyup",function(t){delete e.keysHeld[t.code]}),document.addEventListener("keydown",function(t){var n=e.keysHeld;if(n[t.code]=!0,!e.props.ui.collapseRoot&&!e.props.ui.showPopupSearch){if(!["ControlLeft","ControlRight","MetaLeft","MetaRight","AltLeft","AltRight"].some(function(e){return n[e]})){var r=!0;switch(t.code){case"Escape":e.props.ui.showPopupAbout?e.props.togglePopupAbout():e.webConfig.onlyJukebox||e.props.toggleCollapseRoot();break;case"Equal":e.props.setVolume(e.props.player.volume+.1);break;case"Minus":e.props.setVolume(e.props.player.volume-.1);break;case"ArrowLeft":e.props.seekPrevTrack();break;case"ArrowRight":e.props.seekNextTrack();break;case"Comma":e.props.setSeekByDelta(-10);break;case"Period":e.props.setSeekByDelta(10);break;case"Space":e.props.toggleIsPlaying();break;case"KeyS":e.props.toggleIsShuffle();break;case"KeyR":e.props.toggleIsRepeat();break;default:b.Logger.log(t),r=!1}r&&t.preventDefault()}}}),b.Manager.fetch(this.webConfig).then(function(t){return e.props.setManager(t)}).then(function(){var t=e.props.data.manager;if(t&&t.playlists.length)return e.props.setCurrentTrackList(t.playlists[0])})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.player,r=e.ui,a=this.state.colorScheme;if(!t.manager)return null;var o=this.webConfig;return p.a.createElement(Gn,{colorScheme:a,isCollapsed:r.collapseRoot},p.a.createElement(Qt,null),p.a.createElement(Nn,null,p.a.createElement(Rn,null,p.a.createElement(Wn,{isCollapsed:r.collapseHeader},p.a.createElement(Y,null,p.a.createElement(Ve,null),o.onlyJukebox?p.a.createElement(mt,{onClick:this.props.toggleCollapseHeader,isCollapsed:r.collapseHeader}):p.a.createElement(gt,{onClick:this.props.toggleCollapseRoot,isCollapsed:!1})))),p.a.createElement(Mn,null,t.manager.playlists.length>1&&p.a.createElement(Qn,{isCollapsed:r.collapseSidebar},p.a.createElement(Y,null,p.a.createElement(qe,null),o.onlyJukebox&&p.a.createElement(vt,{onClick:this.props.toggleCollapseSidebar,isCollapsed:r.collapseSidebar}))),p.a.createElement(Kn,null,p.a.createElement(Y,null,n.browser?p.a.createElement(st,null):n.trackList&&p.a.createElement(he,null)))),p.a.createElement(Rn,null,p.a.createElement(Vn,null,p.a.createElement(Y,null,p.a.createElement(Cn,null),p.a.createElement(Rt,null))))),p.a.createElement(cn,null),p.a.createElement(gn,null),p.a.createElement(rn,null))}}]),t}(p.a.Component),Un=Object(pe.b)(function(e){return{data:e.data,player:e.player,ui:e.ui}},{setManager:function(e){return{type:"SET_MANAGER",payload:{manager:e}}},setVolume:ee,setCurrentTrack:te,setCurrentTrackList:ne,toggleCollapseHeader:function(){return{type:"TOGGLE_COLLAPSE_HEADER"}},toggleCollapseRoot:function(){return{type:"TOGGLE_COLLAPSE_ROOT"}},toggleCollapseSidebar:function(){return{type:"TOGGLE_COLLAPSE_SIDEBAR"}},togglePopupAbout:le,toggleIsPlaying:ae,toggleIsShuffle:oe,toggleIsRepeat:ie,seekNextTrack:ue,seekPrevTrack:ce,setSeekByDelta:re,setIsPlaying:function(e){return{type:"SET_IS_PLAYING",payload:{isPlaying:e}}}})(zn);b.Constants.isTest?function(){var e=document.createElement("jukebox");document.body.appendChild(e),h.a.render(p.a.createElement(be,null),e)}():function(){var e=void 0,t=window;t.createJukebox=function(n){return new Promise(function(r,a){if(e)r(e);else{var o=document.createElement("jukebox");document.body.appendChild(o),h.a.render(p.a.createElement(pe.a,{store:xe},p.a.createElement(Un,{codeConfig:n,ref:function(n){e=Object(ge.a)({},t.JUKEBOX||{},{elm:o}),r(e)}})),o)}})}}()},21:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!==typeof window,a=r&&"?test"===window.location.search,o="staging"===Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_JUKEBOX_ENV||r&&window.location.pathname.includes("/staging/"),i=!o&&"development"===Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_JUKEBOX_ENV,u=a,c=i?"http://localhost:8080":"https://s3.amazonaws.com/mpaulweeks-jukebox",l=!(i||o)?"production":"staging",s=l+"/data",f=l+"/audio",p=l+"/image",d=l+"/web",h=c+"/"+s,b=c+"/"+f,g=c+"/"+p;t.Constants={isDev:i,isStaging:o,isTest:a,LogDebug:u,LocalDataRoot:"../../local",PlayerBuildPath:"../player/build",PlayerDistPath:"../player/dist",DataDirectory:s,AudioDirectory:f,ImageDirectory:p,WebDirectory:d,DataPath:h,AudioPath:b,ImagePath:g,CollectionFileName:"collection.min.json",InfoLookupFileName:"metaData.min.json"}},26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(27),a=n(39),o=function(){function e(t,n,r){this.name=t,this.tracks=n,this.custom=r,r||this.tracks.sort(a.Track.compare),this.shuffled=e.shuffle(this.tracks),this.imageSrc=this.tracks.length?this.tracks[0].imageSrc:void 0,this.album=this.tracks.length?this.tracks[0].album||this.tracks[0].title:void 0,this.artist=this.tracks.length?this.tracks[0].artist:void 0}return e.shuffle=function(e){for(var t=e.concat(),n=[];t.length>0;){var r=Math.floor(Math.random()*t.length),a=t.splice(r,1)[0];n.push(a)}return n},e.compare=function(e,t){return e.name<t.name?-1:(e.name,t.name,1)},e.fromLookup=function(t,n,o){var i=n.trackIds.map(function(e){return a.Track.fromLookup(e,t)}).filter(r.notEmpty);return new e(n.name,i,!!o)},e.prototype.randomTrack=function(){var e=this.tracks;return e[Math.floor(Math.random()*e.length)]},e.prototype.jumpToTrack=function(e,t,n){var r=this.tracks,a=this.shuffled,o=e.shuffle?a:r,i=o.indexOf(t);return o[(o.length+i+n)%o.length]},e.prototype.nextTrack=function(e,t){return this.jumpToTrack(e,t,1)},e.prototype.prevTrack=function(e,t){return this.jumpToTrack(e,t,-1)},e}();t.Playlist=o},27:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,u)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(u){o=[6,u],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.calcTimestamp=function(e){return""+String(e.getFullYear()).padStart(4,"0")+String(e.getMonth()+1).padStart(2,"0")+String(e.getDate()).padStart(2,"0")+String(e.getHours()).padStart(2,"0")+String(e.getMinutes()).padStart(2,"0")+String(e.getSeconds()).padStart(2,"0")},t.range=function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t},t.asyncMap=function(e,t){return r(this,void 0,void 0,function(){var n,r,o;return a(this,function(a){switch(a.label){case 0:n=[],r=0,a.label=1;case 1:return r<e.length?[4,t(e[r],r,e)]:[3,4];case 2:o=a.sent(),n.push(o),a.label=3;case 3:return r++,[3,1];case 4:return[2,n]}})})},t.notEmpty=function(e){return null!==e&&void 0!==e},t.truncate=function(e,t){return(e=e||"").length<t?e:e.substring(0,t-4)+" ..."},t.sortByFunc=function(e,t){e.sort(function(e,n){var r=t(e),a=t(n);return r<a?-1:a<r?1:0})}},28:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),a=function(){function e(){}return e.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.Constants.LogDebug&&console.log.apply(console,e)},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},e}();t.Logger=a},38:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),a=function(){return function(e,t,n){this.name=t,this.playlists=Object.keys(n).map(function(t){return r.Playlist.fromLookup(e,{name:t,trackIds:n[t]})})}}();t.PlaylistBrowser=a},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),a=n(28),o=function(){function e(e){var t=e.id,n=e.album,a=e.artist,o=e.title,i=e.year,u=e.duration,c=e.trackNumber,l=e.imageHash;this.id=t,this.album=n,this.artist=a,this.title=o,this.year=i,this.trackNumber=c,c&&(2===c.split("/").length?(this.trackNumerator=parseFloat(c.split("/")[0]),this.trackDenominator=parseFloat(c.split("/")[1])):c.includes("/")||(this.trackNumerator=parseFloat(c)),this.trackNumberDisplay=""+this.trackNumerator),this.durationDisplay=u?Math.floor(u/1e3/60)+":"+String(Math.floor(u/1e3%60)).padStart(2,"0"):"",this.sortKey=this.album+" "+String(this.trackNumerator||0).padStart(4,"0"),this.audioSrc=r.Constants.AudioPath+"/"+t,this.imageSrc=l&&r.Constants.ImagePath+"/"+l}return e.compare=function(e,t){return e.sortKey<t.sortKey?-1:(e.sortKey,t.sortKey,1)},e.fromLookup=function(t,n){var r=n.get(t);return r||a.Logger.log("failed track lookup! ID:",t),r&&new e(r)},e}();t.Track=o},40:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.data=e}return e.default=function(){return new e({playlists:{},tracks:{},images:{}})},e.prototype.containsTrack=function(e){return!!this.data.tracks[e]},e.prototype.containsImage=function(e){return!!this.data.images[e]},e}();t.Collection=r},41:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,u)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(u){o=[6,u],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},o=this;Object.defineProperty(t,"__esModule",{value:!0});var i=n(40),u=n(21),c=n(42),l=function(e,t){return r(o,void 0,void 0,function(){var n;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch((a=u.Constants.DataPath+"/"+t,a+"?v="+(new Date).getTime()))];case 1:return[4,r.sent().json()];case 2:return n=r.sent(),[2,new e(n)];case 3:return r.sent(),[2,e.default()];case 4:return[2]}var a})})};t.fetchCollection=function(){return r(o,void 0,void 0,function(){return a(this,function(e){return[2,l(i.Collection,u.Constants.CollectionFileName)]})})},t.fetchInfoLookup=function(){return r(o,void 0,void 0,function(){return a(this,function(e){return[2,l(c.InfoLookup,u.Constants.InfoLookupFileName)]})})}},42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.data=e}return e.default=function(){return new e({})},e.prototype.containsTrack=function(e){return!!this.get(e)},e.prototype.get=function(e){return this.data[e]},e}();t.InfoLookup=r},43:function(e,t,n){"use strict";(function(e){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,u)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(u){o=[6,u],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(29)),u=o(n(65)),c=o(n(66)),l=o(n(76)),s=n(28),f=function(){function t(){}return t.dataUrl=function(e){var t=e.imageFormat,n=e.imageBuffer;return t&&n?"data:image/"+t+";base64,"+n.toString("base64"):null},t.fromBuffer=function(e){return r(this,void 0,void 0,function(){var t,n,r=this;return a(this,function(a){switch(a.label){case 0:return[4,this.tryParseNodeId3(e).catch(function(){return r.tryParseJsMediaTags(e)}).catch(function(){return{album:"Unknown Album",artist:"Unknown Artist",title:"Unknown Title",year:"????",duration:0,trackNumber:void 0,imageSrc:void 0}})];case 1:t=a.sent();try{n=u.default(e),t.duration=n}catch(o){s.Logger.log("error during duration calc:",o)}return[2,t]}})})},t.fromUrl=function(t){return r(this,void 0,void 0,function(){var n,r;return a(this,function(a){switch(a.label){case 0:return[4,fetch(t)];case 1:return[4,a.sent().arrayBuffer()];case 2:return n=a.sent(),r=e.from(n),[2,this.fromBuffer(r)]}})})},t.fromFile=function(e){return r(this,void 0,void 0,function(){var t=this;return a(this,function(n){return[2,new Promise(function(n,r){i.default.readFile(e,function(e,a){if(e)s.Logger.debug("error reading meta:",e),r(e);else{var o=t.fromBuffer(a);n(o)}})})]})})},t.tryParseNodeId3=function(e){return new Promise(function(t,n){var r=l.default.read(e);s.Logger.debug("node-id3:",r),r.image?t({album:r.album,artist:r.artist,title:r.title,year:r.year,duration:0,trackNumber:void 0===r.trackNumber?void 0:String(r.trackNumber),imageFormat:r.image.mime,imageBuffer:r.image.imageBuffer}):(s.Logger.debug("node-id3 error:",r),n())})},t.tryParseJsMediaTags=function(t){return new Promise(function(n,r){c.default.read(t,{onSuccess:function(t){var r,a=t.tags;if(s.Logger.debug("jsmediatags:",a),a.picture){var o=a.picture.data.map(function(e){return String.fromCharCode(e)}).join("");r=e.from(o,"binary")}n({album:a.album,artist:a.artist,title:a.title,year:a.year,duration:0,trackNumber:void 0===a.track?void 0:String(a.track),imageFormat:a.picture&&a.picture.format,imageBuffer:r})},onError:function(e){s.Logger.debug("jsmediatags error:",e),r(e)}})})},t}();t.MetaLoader=f}).call(this,n(14).Buffer)},54:function(e,t,n){e.exports=n(112)},61:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,u)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(u){o=[6,u],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(38),u=n(41),c=n(26),l=n(27),s=function(){function e(e,t,n){this.webConfig=e,this.collection=t,this.infoLookup=n;var a={},o=Object.keys(t.data.playlists).filter(function(t){return!e.playlists||e.playlists.includes(t)}).map(function(e){var o=t.data.playlists[e];return a=r({},a,o.trackIds.reduce(function(e,t){return e[t]=!0,e},{})),c.Playlist.fromLookup(n,o,!0)});o.sort(c.Playlist.compare),this.playlists=o;var u=c.Playlist.fromLookup(n,{name:"All Songs",trackIds:Object.keys(e.playlists?a:t.data.tracks)}),l={},s={};u.tracks.forEach(function(e){l[e.album]=(l[e.album]||[]).concat(e.id),s[e.artist]=(s[e.artist]||[]).concat(e.id)}),this.allSongs=u,this.browseAlbums=new i.PlaylistBrowser(n,"Albums",l),this.browseArtists=new i.PlaylistBrowser(n,"Artists",s)}return e.fetch=function(t){return a(this,void 0,void 0,function(){var n,r;return o(this,function(a){switch(a.label){case 0:return[4,u.fetchCollection()];case 1:return n=a.sent(),[4,u.fetchInfoLookup()];case 2:return r=a.sent(),[2,new e(t,n,r)]}})})},e.prototype.search=function(e){if(!e||!e.length)return[];var t=[],n=e.toLowerCase().split(" ");return this.playlists.forEach(function(e){var r=e.tracks.map(function(t){var r=(t.album+" "+t.artist+" "+t.title).toLowerCase(),a=n.filter(function(e){return r.includes(e)}).length;return{playlist:e,track:t,score:a}}).filter(function(e){return e.score>0});t.push.apply(t,r)}),l.sortByFunc(t,function(e){return e.score}),t.reverse()},e}();t.Manager=s},95:function(e,t){},96:function(e,t){},97:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,u)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(u){o=[6,u],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(98)),u=n(21),c=n(43),l=function(){function e(){}return e.compileTrackData=function(e,t){return{album:t.album,artist:t.artist,title:t.title,year:t.year,duration:t.duration,trackNumber:t.trackNumber,imageFormat:t.imageFormat,id:e,updated:new Date,imageHash:t.imageBuffer&&i.default(t.imageBuffer)}},e.fromId=function(e){return r(this,void 0,void 0,function(){var t,n;return a(this,function(r){switch(r.label){case 0:return t=u.Constants.AudioPath+"/"+e,[4,c.MetaLoader.fromUrl(t)];case 1:return n=r.sent(),[2,this.compileTrackData(e,n)]}})})},e}();t.SongLoader=l}},[[54,2,1]]]);
//# sourceMappingURL=main.7adfe310.chunk.js.map