(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(n(101)),i="undefined"!==typeof window;function c(t,e){if(i){var n=o.default.parse(location.search);if(void 0!==n[t])return n[t]}return e[t]}function u(t,e){var n=c(t,e);if(void 0!==n)return Array.isArray(n)?n:[String(n)]}e.getWebConfig=function(t){var e=r({playlist:void 0,playlist_only:!1,only_jukebox:!1,color_scheme:void 0},t);return{PlaylistWhitelist:u("playlist",e),HideAggregateLists:!!c("playlist_only",e),OnlyJukebox:!!c("only_jukebox",e),ColorScheme:c("color_scheme",e)}}},111:function(t,e,n){"use strict";n.r(e);var r=n(23),a=n.n(r),o=n(29),i=n(5),c=n(6),u=n(9),l=n(7),s=n(10),f=n(0),p=n.n(f),d=n(16),h=n.n(d),b=n(4),g=n(1),m=n(2),v=n(14),y=n.n(v);function E(){var t=Object(g.a)(["\n  position: relative;\n\n  ","\n\n  border: var(--jukebox-border-width) solid var(--jukebox-foreground);\n  box-sizing: border-box;\n  padding: 10px;\n"]);return E=function(){return t},t}function x(){var t=Object(g.a)(["\n  &,\n  & *,\n  & a:hover,\n  & a:visited,\n  & a:active {\n    background: none;\n    border: none;\n    bottom: auto;\n    clear: none;\n    cursor: default;\n    display: block;\n    float: none;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: medium;\n    font-style: normal;\n    font-weight: normal;\n    height: auto;\n    left: auto;\n    letter-spacing: normal;\n    line-height: normal;\n    max-height: none;\n    max-width: none;\n    min-height: 0;\n    min-width: 0;\n    overflow: visible;\n    position: static;\n    right: auto;\n    text-align: left;\n    text-decoration: none;\n    text-indent: 0;\n    text-transform: none;\n    top: auto;\n    visibility: visible;\n    white-space: normal;\n    width: auto;\n    z-index: auto;\n  }\n"]);return x=function(){return t},t}function k(){var t=Object(g.a)(["\n  padding-left: calc(2 * var(--jukebox-tab-size));\n  text-align: left;\n\n  @media (max-width: 600px) {\n    padding-left: 0px;\n    text-align: center;\n  }\n"]);return k=function(){return t},t}function w(){var t=Object(g.a)(["\n  flex-grow: 1;\n  ","\n"]);return w=function(){return t},t}function O(){var t=Object(g.a)(["\n  ","\n"]);return O=function(){return t},t}function j(){var t=Object(g.a)(["\n  ","\n"]);return j=function(){return t},t}function C(){var t=Object(g.a)(["\n  ","\n"]);return C=function(){return t},t}function A(){var t=Object(g.a)([""]);return A=function(){return t},t}function S(){var t=Object(g.a)(["\n  transition-duration: 1s;\n  transition-delay: 0s;\n  transition-timing-function: ease-in-out;\n"]);return S=function(){return t},t}var L=Object(m.a)("div")(S()),_=Object(m.a)("div")(A()),P=Object(m.a)(_)(C(),function(t){return t.highlight&&"\n    background-color: var(--jukebox-highlight);\n  "}),T=(Object(m.a)(_)(j(),function(t){return t.highlight&&"\n    color: var(--jukebox-highlight);\n  "}),"\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: stretch;\n  flex-wrap: no-wrap;\n  flex-grow: 1;\n"),B=m.a.div(O(),T),I=m.a.div(w(),"\n  overflow-x: hidden;\n  overflow-y: auto;\n"),N=m.a.h1(k()),G=(m.a.div(x()),m.a.div(E(),T)),D=function(t){return{type:"SET_CURRENT_TRACK",payload:{track:t}}},Y=function(t){return{type:"SET_CURRENT_TRACKLIST",payload:{trackList:t}}},M=function(){return{type:"TOGGLE_IS_PLAYING"}},W=function(){return{type:"SEEK_NEXT_TRACK"}},R=function(){return{type:"SEEK_PREV_TRACK"}},Q=function(){return{type:"TOGGLE_POPUP_ABOUT"}},V=n(8);function z(){var t=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  flex-wrap: no-wrap;\n"]);return z=function(){return t},t}function K(){var t=Object(g.a)(["\n  width: auto;\n  height: 50px;\n\n  @media (max-width: 600px) {\n    display: none;\n  }\n"]);return K=function(){return t},t}function U(){var t=Object(g.a)(["\n  cursor: pointer;\n\n  ","\n"]);return U=function(){return t},t}function F(){var t=Object(g.a)(["\n  width: 100%;\n  border-collapse: collapse;\n  color: inherit;\n\n  & th,\n  & td {\n    border-top: 1px solid var(--jukebox-foreground);\n    box-sizing: border-box;\n    padding: 0px 5px;\n    height: 60px;\n  }\n\n  & th {\n    border-top-width: 0px;\n  }\n"]);return F=function(){return t},t}function H(){var t=Object(g.a)([""]);return H=function(){return t},t}function J(){var t=Object(g.a)([""]);return J=function(){return t},t}var X=Object(m.a)(B)(J()),Z=Object(m.a)(I)(H()),q=m.a.table(F()),$=Object(m.a)("tr")(U(),function(t){return t.isCurrent&&"\n    background-color: var(--jukebox-highlight);\n  "}),tt=m.a.img(K()),et=m.a.div(z());function nt(t,e){return t.custom&&e.splice(5,1),e}var rt=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props,e=t.player,n=t.setCurrentTrack,r=e.trackList;if(!r)throw new Error("TrackListView should not be rendered in this state!");var a=nt(r,["","title","artist","length","album","track #"]);return p.a.createElement(X,null,p.a.createElement(N,null,r.name,!r.custom&&p.a.createElement("em",null," (sortable) ")),p.a.createElement(Z,null,p.a.createElement(q,null,p.a.createElement("thead",null,p.a.createElement("tr",null,a.map(function(t,e){return p.a.createElement("th",{key:"header-".concat(e)},p.a.createElement(et,null,t))}))),p.a.createElement("tbody",null,r.tracks.map(function(t,a){var o=nt(r,[p.a.createElement(tt,{src:t.imageSrc||y.a}),t.title,Object(b.truncate)(t.artist,20),t.durationDisplay,t.album,t.trackNumberDisplay]);return p.a.createElement($,{key:"track-".concat(a),onClick:function(){return n(t)},isCurrent:t===e.track},o.map(function(t,e){return p.a.createElement("td",{key:"body-".concat(a,"-").concat(e)},p.a.createElement(et,null,t))}))})))))}}]),e}(p.a.Component),at=Object(V.b)(function(t){return{player:t.player}},{setCurrentTrack:D})(rt),ot=function(t){function e(){var t,n;Object(i.a)(this,e);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(c)))).audioElm=new Audio,n.state={tracks:[]},n.test=function(){var t=Object(o.a)(a.a.mark(function t(e){var r,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=Object(b.range)(5).map(function(){return e.allSongs.randomTrack().id}),i=["???"].concat(r),Object(b.asyncMap)(i,function(){var t=Object(o.a)(a.a.mark(function t(e){var r,o,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.SongLoader.fromId(e);case 2:r=t.sent,o=new b.Track(r),i=n.state.tracks.concat(o),n.setState({tracks:i});case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n}return Object(s.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;b.Logger.log(Object({NODE_ENV:"production",PUBLIC_URL:"."})),b.Manager.fetch(Object(b.getWebConfig)()).then(function(e){return t.setState({manager:e},function(){return t.test(e)})})}},{key:"render",value:function(){var t=this.state.tracks;new b.Playlist("test playlist",t,!0);return p.a.createElement("div",null,"loaded",p.a.createElement(at,null))}}]),e}(p.a.Component),it=n(3),ct=n(18),ut={manager:void 0},lt={isPlaying:!1,shuffle:!1,repeat:!1,track:void 0,trackList:void 0,browser:void 0},st={collapseRoot:!0,collapseHeader:!1,collapseSidebar:!1,showPopupAbout:!1},ft=Object(ct.b)({data:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_MANAGER":var n=e.payload.manager;return Object(it.a)({},t,{manager:n});default:return t}},player:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_CURRENT_TRACK":var n=e.payload.track;if(!t.track||n&&n.audioSrc!==t.track.audioSrc)return Object(it.a)({},t,{track:n,isPlaying:!0});case"SET_CURRENT_TRACKLIST":var r=e.payload.trackList,a=t.trackList;if(!a||r&&a.name!==r.name)return Object(it.a)({},t,{trackList:r,browser:void 0});case"SET_CURRENT_BROWSER":var o=e.payload.browser;return Object(it.a)({},t,{trackList:void 0,browser:o});case"SET_IS_PLAYING":var i=e.payload.isPlaying;return i&&!t.track&&t.trackList?Object(it.a)({},t,{track:t.trackList.tracks[0],isPlaying:i}):Object(it.a)({},t,{isPlaying:i});case"SET_IS_SHUFFLE":var c=e.payload.shuffle;return Object(it.a)({},t,{shuffle:c});case"SET_IS_REPEAT":var u=e.payload.repeat;return Object(it.a)({},t,{repeat:u});case"TOGGLE_IS_PLAYING":var l=t.isPlaying;return l||t.track||!t.trackList?Object(it.a)({},t,{isPlaying:!l}):Object(it.a)({},t,{track:t.trackList.tracks[0],isPlaying:!l});case"TOGGLE_IS_SHUFFLE":var s=t.shuffle;return Object(it.a)({},t,{shuffle:!s});case"TOGGLE_IS_REPEAT":var f=t.repeat;return Object(it.a)({},t,{repeat:!f});case"SEEK_NEXT_TRACK":var p=t.track,d=t.trackList;if(p&&d){var h=d.nextTrack(t,p);return Object(it.a)({},t,{track:h})}case"SEEK_PREV_TRACK":var b=t.track,g=t.trackList;if(b&&g){var m=g.prevTrack(t,b);return Object(it.a)({},t,{track:m})}case"TOGGLE_IS_SHUFFLE":var v=t.shuffle;return Object(it.a)({},t,{shuffle:!v});default:return t}},ui:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;switch((arguments.length>1?arguments[1]:void 0).type){case"TOGGLE_COLLAPSE_ROOT":return Object(it.a)({},t,{collapseRoot:!t.collapseRoot});case"TOGGLE_COLLAPSE_HEADER":return Object(it.a)({},t,{collapseHeader:!t.collapseHeader});case"TOGGLE_COLLAPSE_SIDEBAR":return Object(it.a)({},t,{collapseSidebar:!t.collapseSidebar});case"TOGGLE_POPUP_ABOUT":return Object(it.a)({},t,{showPopupAbout:!t.showPopupAbout});default:return t}}}),pt=Object(ct.c)(ft);function dt(){var t=Object(g.a)(["\n  font-size: 1.5em;\n  font-weight: bold;\n"]);return dt=function(){return t},t}function ht(){var t=Object(g.a)(["\n  font-size: 1.5em;\n  font-style: italic;\n"]);return ht=function(){return t},t}function bt(){var t=Object(g.a)(["\n  font-size: 2.5em;\n  font-weight: bold;\n"]);return bt=function(){return t},t}function gt(){var t=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  margin: 0px 20px;\n  text-align: center;\n"]);return gt=function(){return t},t}function mt(){var t=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  flex-grow: 1;\n"]);return mt=function(){return t},t}function vt(){var t=Object(g.a)(["\n  width: auto;\n  height: 100%;\n\n  @media (max-width: 600px){\n    width: 100%;\n    height: auto;\n  }\n"]);return vt=function(){return t},t}function yt(){var t=Object(g.a)(["\n  flex-grow: 0;\n"]);return yt=function(){return t},t}function Et(){var t=Object(g.a)(["\n  width: 100%;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: stretch;\n  flex-wrap: no-wrap;\n\n  @media (max-width: 600px){\n    flex-direction: column;\n  }\n"]);return Et=function(){return t},t}var xt=m.a.div(Et()),kt=m.a.div(yt()),wt=m.a.img(vt()),Ot=m.a.div(mt()),jt=m.a.div(gt()),Ct=Object(m.a)(jt)(bt()),At=Object(m.a)(jt)(ht()),St=Object(m.a)(jt)(dt()),Lt=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props.player.track;return t?p.a.createElement(xt,null,p.a.createElement(kt,null,p.a.createElement(wt,{src:t.imageSrc||y.a})),p.a.createElement(Ot,null,p.a.createElement(Ct,null,t.title),p.a.createElement(At,null,Object(b.truncate)(t.artist,80)),p.a.createElement(St,null,t.album))):p.a.createElement(xt,null,p.a.createElement(kt,null,p.a.createElement(wt,{src:y.a})),p.a.createElement(Ot,null,"Click on a track to start playing"))}}]),e}(p.a.Component),_t=Object(V.b)(function(t){return{player:t.player}})(Lt);function Pt(){var t=Object(g.a)(["\n  cursor: pointer;\n  box-sizing: border-box;\n  padding: 5px;\n\n  ","\n"]);return Pt=function(){return t},t}function Tt(){var t=Object(g.a)(["\n  ","\n"]);return Tt=function(){return t},t}var Bt=m.a.div(Tt(),T),It=Object(m.a)("div")(Pt(),function(t){return t.isCurrent&&"\n    background-color: var(--jukebox-highlight);\n  "}),Nt=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.player,r=t.setCurrentTrackList,a=t.setCurrentBrowser,o=e.manager;if(!o)throw new Error("PlaylistMenu should not be rendered in this state!");return p.a.createElement(Bt,null,!o.webConfig.HideAggregateLists&&p.a.createElement("div",null,p.a.createElement(It,{onClick:function(){return r(o.allSongs)},isCurrent:o.allSongs===n.trackList},o.allSongs.name),p.a.createElement(It,{onClick:function(){return a(o.browseAlbums)},isCurrent:o.browseAlbums===n.browser},o.browseAlbums.name),p.a.createElement(It,{onClick:function(){return a(o.browseArtists)},isCurrent:o.browseArtists===n.browser},o.browseArtists.name),p.a.createElement("hr",null)),o.playlists.map(function(t,e){return p.a.createElement(It,{key:"playlist-name-".concat(e),onClick:function(){return r(t)},isCurrent:t===n.trackList},t.name)}))}}]),e}(p.a.Component),Gt=Object(V.b)(function(t){return{data:t.data,player:t.player}},{setCurrentTrackList:Y,setCurrentBrowser:function(t){return{type:"SET_CURRENT_BROWSER",payload:{browser:t}}}})(Nt);function Dt(){var t=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n\n  text-align: center;\n  margin: 2px 0px;\n\n  &:first-child {\n    margin-bottom: 8px;\n  }\n"]);return Dt=function(){return t},t}function Yt(){var t=Object(g.a)(["\n  width: 90%;\n  height: auto;\n"]);return Yt=function(){return t},t}function Mt(){var t=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: no-wrap;\n\n  width: 20%;\n  padding: 5px;\n  box-sizing: border-box;\n\n  cursor: pointer;\n  &:hover {\n    border: 1px solid grey;\n    border-radius: 5px;\n    padding: 4px;\n  }\n\n  @media (max-width: 600px) {\n    width: 50%;\n  }\n"]);return Mt=function(){return t},t}function Wt(){var t=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]);return Wt=function(){return t},t}function Rt(){var t=Object(g.a)([""]);return Rt=function(){return t},t}var Qt=Object(m.a)(B)(Rt()),Vt=Object(m.a)(I)(Wt()),zt=m.a.div(Mt()),Kt=m.a.img(Yt()),Ut=m.a.div(Dt()),Ft=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(c.a)(e,[{key:"truncate",value:function(t){return(t||"").substring(0,20)}},{key:"render",value:function(){var t=this.props,e=t.player,n=t.setCurrentTrackList,r=e.browser;if(!r)throw new Error("BrowserView should not be rendered in this state!");return p.a.createElement(Qt,null,p.a.createElement(N,null,r.name),p.a.createElement(Vt,null,r.playlists.map(function(t,e){return p.a.createElement(zt,{key:"playlist-".concat(e),onClick:function(){return n(t)}},p.a.createElement(Ut,null,p.a.createElement(Kt,{src:t.imageSrc||y.a})),p.a.createElement(Ut,null,p.a.createElement("b",null,t.album||"???")),p.a.createElement(Ut,null,t.artist||"???"))})))}}]),e}(p.a.Component),Ht=Object(V.b)(function(t){return{player:t.player}},{setCurrentTrackList:Y})(Ft);function Jt(){var t=Object(g.a)(["\n  cursor: pointer;\n\n  width: var(--jukebox-tab-size);\n  height: var(--jukebox-tab-size);\n\n  justify-content: center;\n  align-items: center;\n"]);return Jt=function(){return t},t}function Xt(){var t=Object(g.a)(["\n  color: var(--jukebox-foreground);\n  background-color: var(--jukebox-background);\n\n  z-index: 1;\n  position: absolute;\n\n  border: var(--jukebox-border-width) solid var(--jukebox-foreground);\n  box-sizing: border-box;\n\n  ","\n\n    @media (max-width: 600px) {\n      display: none;\n    }\n"]);return Xt=function(){return t},t}var Zt=Object(m.a)(L)(Xt(),function(t){return t.isCollapsed?"\n    ".concat([t.box.tightSide,t.box.outerSide].map(function(t){return"\n      ".concat(t,": 0px;\n    ")}).join(""),"\n    ").concat([t.box.gapSide,t.box.innerSide].map(function(t){return"\n      ".concat(t,": auto;\n    ")}).join(""),"\n\n    ").concat(t.box.outerSide,": calc(0px - ((2 * var(--jukebox-border-width)) + (2 * var(--jukebox-frame-gap)) + var(--jukebox-tab-size)));\n\n    ").concat([t.box.tightSide,t.box.innerSide].map(function(t){return"\n      margin-".concat(t,": calc(0px - var(--jukebox-border-width));\n      padding-").concat(t,": 0px;\n      border-").concat(t,"-width: 0px;\n    ")}).join(""),"\n    ").concat([t.box.gapSide,t.box.outerSide].map(function(t){return"\n      margin-".concat(t,": 0px;\n      padding-").concat(t,": var(--jukebox-frame-gap);\n      border-").concat(t,"-width: var(--jukebox-border-width);\n    ")}).join(""),"\n  "):"\n    ".concat([t.box.tightSide,t.box.outerSide].map(function(t){return"\n      ".concat(t,": 0px;\n      margin-").concat(t,": calc(0px - var(--jukebox-border-width));\n      padding-").concat(t,": 0px;\n      border-").concat(t,"-width: 0px;\n    ")}).join(""),"\n    ").concat([t.box.gapSide,t.box.innerSide].map(function(t){return"\n      ".concat(t,": auto;\n      margin-").concat(t,": 0px;\n      padding-").concat(t,": var(--jukebox-frame-gap);\n      border-").concat(t,"-width: var(--jukebox-border-width);\n    ")}).join(""),"\n  ")}),qt=Object(m.a)(G)(Jt()),$t=function(t,e){return function(n){var r=n.onClick,a=n.isCollapsed;return p.a.createElement(e,{isCollapsed:a,box:t},p.a.createElement(qt,{onClick:r},a?t.collapsedText:t.openText))}},te=$t({openText:"X",collapsedText:"",innerSide:"bottom",outerSide:"top",gapSide:"left",tightSide:"right"},Zt),ee=$t({openText:"\u25b2",collapsedText:"\u25bc",innerSide:"top",outerSide:"bottom",gapSide:"left",tightSide:"right"},Zt),ne=$t({openText:"\u25c4",collapsedText:"\u25ba",innerSide:"left",outerSide:"right",gapSide:"bottom",tightSide:"top"},Zt);function re(){var t=Object(g.a)(["\n  ","\n\n  border: 1px solid var(--jukebox-foreground);\n  border-radius: 5px;\n  margin: 5px;\n  font-size: 1.5em;\n  height: 2em;\n  width: 2em;\n\n  & i {\n    font-size: 1.5em;\n  }\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: no-wrap;\n"]);return re=function(){return t},t}function ae(){var t=Object(g.a)(["\n  flex-grow: 1;\n"]);return ae=function(){return t},t}function oe(){var t=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n"]);return oe=function(){return t},t}function ie(){var t=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: no-wrap;\n\n  @media (max-width: 600px) {\n    flex-direction: column;\n  }\n"]);return ie=function(){return t},t}var ce=m.a.div(ie()),ue=m.a.div(oe()),le=Object(m.a)(ue)(ae()),se=Object(m.a)(P)(re(),"\n  cursor: pointer;\n  &:hover {\n    background-color: var(--jukebox-hover);\n    color: var(--jukebox-background);\n  }\n"),fe=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props.player;return p.a.createElement(ce,null,p.a.createElement(ue,null,p.a.createElement(se,{onClick:this.props.togglePopupAbout},"?")),p.a.createElement(le,null,p.a.createElement(se,{onClick:this.props.seekPrevTrack},p.a.createElement("i",{className:"material-icons"},"skip_previous")),p.a.createElement(se,{onClick:this.props.toggleIsPlaying},t.isPlaying?p.a.createElement("i",{className:"material-icons"},"pause_circle_outline"):p.a.createElement("i",{className:"material-icons"},"play_circle_outline")),p.a.createElement(se,{onClick:this.props.seekNextTrack},p.a.createElement("i",{className:"material-icons"},"skip_next"))),p.a.createElement(ue,null,p.a.createElement(se,{onClick:this.props.toggleIsShuffle,highlight:t.shuffle},p.a.createElement("i",{className:"material-icons"},"shuffle")),p.a.createElement(se,{onClick:this.props.toggleIsRepeat,highlight:t.repeat},p.a.createElement("i",{className:"material-icons"},"repeat"))))}}]),e}(p.a.Component),pe=Object(V.b)(function(t){return{player:t.player}},{seekNextTrack:W,seekPrevTrack:R,toggleIsPlaying:M,toggleIsShuffle:function(){return{type:"TOGGLE_IS_SHUFFLE"}},toggleIsRepeat:function(){return{type:"TOGGLE_IS_REPEAT"}},togglePopupAbout:Q})(fe),de={light:{foreground:"black",background:"white",hover:"darkgrey",highlight:"lightblue",collapseForeground:"white",collapseBackground:"grey"},dark:{foreground:"white",background:"black",hover:"lightgrey",highlight:"blue",collapseForeground:"black",collapseBackground:"grey"}};de.default=de.light;var he=function(t){return t&&de[t]||de.default},be=function(t){function e(){var t,n;Object(i.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(a)))).audioElm=new Audio,n.onTrackEnd=function(t){n.props.player.repeat?n.audioElm.play():n.props.seekNextTrack()},n}return Object(s.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.audioElm.addEventListener("ended",function(){return t.onTrackEnd()}),["https://fonts.googleapis.com/icon?family=Material+Icons"].forEach(function(t){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.head.appendChild(e)})}},{key:"componentDidUpdate",value:function(t){var e=this.audioElm,n=this.props.player,r=n.isPlaying,a=n.track;a&&a!==t.player.track&&(e.src=a.audioSrc),r?e.play():e.pause()}},{key:"render",value:function(){return""}}]),e}(p.a.Component),ge=Object(V.b)(function(t){return{player:t.player}},{setCurrentTrack:D,seekNextTrack:W})(be);function me(){var t=Object(g.a)([""]);return me=function(){return t},t}function ve(){var t=Object(g.a)(["\n  font-size: 2em;\n  font-style: italic;\n  font-weight: bold;\n  padding-bottom: 1em;\n"]);return ve=function(){return t},t}function ye(){var t=Object(g.a)(["\n  background-color: var(--jukebox-background);\n  color: var(--jukebox-foreground);\n  border-radius: 2em;\n  padding: 2em;\n  text-align: center;\n"]);return ye=function(){return t},t}function Ee(){var t=Object(g.a)(["\n  ","\n  justify-content: center;\n  align-items: center;\n\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n\n  z-index: var(--jukebox-popup-z-index);\n\n  background-color: rgba(0,0,0,0.5);\n"]);return Ee=function(){return t},t}var xe=m.a.div(Ee(),T),ke=m.a.div(ye()),we=m.a.div(ve()),Oe=m.a.div(me()),je=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return this.props.ui.showPopupAbout?p.a.createElement(xe,{onClick:this.props.togglePopupAbout},p.a.createElement(ke,null,p.a.createElement(we,null,"jukebox"),p.a.createElement(Oe,null,"made by ",p.a.createElement("a",{href:"https://twitter.com/mpaulweeks"},"@mpaulweeks")))):""}}]),e}(p.a.Component),Ce=Object(V.b)(function(t){return{ui:t.ui}},{togglePopupAbout:Q})(je);function Ae(){var t=Object(g.a)(["\n  flex-grow: 1;\n"]);return Ae=function(){return t},t}function Se(){var t=Object(g.a)(["\n  padding-right: 0px;\n  width: 200px;\n  min-width: 200px;\n  max-width: 200px;\n  ","\n  @media (max-width: 600px) {\n    padding-right: var(--jukebox-frame-gap);\n    padding-bottom: 0px;\n    width: auto;\n    min-width: auto;\n    max-width: none;\n  }\n"]);return Se=function(){return t},t}function Le(){var t=Object(g.a)(["\n  padding-top: 0px;\n"]);return Le=function(){return t},t}function _e(){var t=Object(g.a)(["\n  padding-bottom: 0px;\n  height: 200px;\n  ","\n\n  @media (max-width: 600px) {\n    height: auto;\n  }\n"]);return _e=function(){return t},t}function Pe(){var t=Object(g.a)(["\n  ","\n  padding: var(--jukebox-frame-gap);\n"]);return Pe=function(){return t},t}function Te(){var t=Object(g.a)(["\n  ","\n  flex-direction: row;\n\n  @media (max-width: 600px) {\n    flex-direction: column;\n  }\n"]);return Te=function(){return t},t}function Be(){var t=Object(g.a)([""]);return Be=function(){return t},t}function Ie(){var t=Object(g.a)(["\n  ","\n\n  font-size: 16px;\n\n  background-color: var(--jukebox-background);\n  color: var(--jukebox-foreground);\n"]);return Ie=function(){return t},t}function Ne(){var t=Object(g.a)(["\n  --jukebox-z-index: 2147483646; /* max possible - 1 */\n  --jukebox-popup-z-index: 2147483647; /* max possible */\n  --jukebox-foreground: ",";\n  --jukebox-background: ",";\n  --jukebox-hover: ",";\n  --jukebox-highlight: ",";\n  --jukebox-border-width: 1px;\n  --jukebox-frame-gap: 10px;\n  --jukebox-tab-size: 50px;\n\n  ","\n\n  position: fixed;\n  z-index: var(--jukebox-z-index);\n  width: 100%;\n  height: 100%;\n  top: 0px;\n  left: 0px;\n  ",";\n\n  @media (max-width: 600px) {\n    position: absolute;\n    height: auto;\n  }\n"]);return Ne=function(){return t},t}var Ge=Object(m.a)(L)(Ne(),function(t){return t.colorScheme.foreground},function(t){return t.colorScheme.background},function(t){return t.colorScheme.hover},function(t){return t.colorScheme.highlight},T,function(t){return t.isCollapsed&&"\n    top: -100%;\n  "}),De=Object(m.a)("div")(Ie(),T),Ye=m.a.div(Be()),Me=m.a.div(Te(),T),We=Object(m.a)(L)(Pe(),T),Re=Object(m.a)(We)(_e(),function(t){return t.isCollapsed&&"\n    margin-top: calc(-200px - var(--jukebox-frame-gap));\n  "}),Qe=Object(m.a)(We)(Le()),Ve=Object(m.a)(We)(Se(),function(t){return t.isCollapsed&&"\n    margin-left: calc(-200px - var(--jukebox-frame-gap));\n  "}),ze=Object(m.a)(We)(Ae()),Ke=function(t){function e(){var t,n;Object(i.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(a)))).webConfig=Object(b.getWebConfig)(n.props.codeConfig),n.state={colorScheme:he(n.webConfig.ColorScheme)},n}return Object(s.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=window;e.JD={app:this,config:this.webConfig,constants:b.Constants},e.JUKEBOX={toggle:this.props.toggleCollapseRoot,open:function(){return t.props.ui.collapseRoot&&t.props.toggleCollapseRoot()},close:function(){return!t.props.ui.collapseRoot&&t.props.toggleCollapseRoot()},play:function(){return!t.props.player.isPlaying&&t.props.toggleIsPlaying()},pause:function(){return t.props.player.isPlaying&&t.props.toggleIsPlaying()}},this.webConfig.OnlyJukebox&&this.props.toggleCollapseRoot(),document.addEventListener("keydown",function(e){if(!t.props.ui.collapseRoot){var n=!0;switch(e.code){case"ArrowLeft":t.props.seekPrevTrack();break;case"ArrowRight":t.props.seekNextTrack();break;case"Space":t.props.toggleIsPlaying();break;default:n=!1}n&&e.preventDefault()}}),b.Manager.fetch(this.webConfig).then(function(e){return t.props.setManager(e)}).then(function(){var e=t.props.data.manager;if(e&&e.playlists.length)return t.props.setCurrentTrackList(e.playlists[0])}).then(function(){return t.props.setIsPlaying(!0)})}},{key:"render",value:function(){var t=this.props,e=t.data,n=t.player,r=t.ui,a=this.state.colorScheme;if(!e.manager)return p.a.createElement("h3",null," loading, please wait... ");var o=this.webConfig;return p.a.createElement(Ge,{colorScheme:a,isCollapsed:r.collapseRoot},p.a.createElement(ge,null),p.a.createElement(De,null,p.a.createElement(Ye,null,p.a.createElement(Re,{isCollapsed:r.collapseHeader},p.a.createElement(G,null,p.a.createElement(_t,null),o.OnlyJukebox?p.a.createElement(ee,{onClick:this.props.toggleCollapseHeader,isCollapsed:r.collapseHeader}):p.a.createElement(te,{onClick:this.props.toggleCollapseRoot,isCollapsed:!1})))),p.a.createElement(Me,null,e.manager.playlists.length>1&&p.a.createElement(Ve,{isCollapsed:r.collapseSidebar},p.a.createElement(G,null,p.a.createElement(Gt,null),o.OnlyJukebox&&p.a.createElement(ne,{onClick:this.props.toggleCollapseSidebar,isCollapsed:r.collapseSidebar}))),p.a.createElement(ze,null,p.a.createElement(G,null,n.browser?p.a.createElement(Ht,null):n.trackList&&p.a.createElement(at,null)))),p.a.createElement(Ye,null,p.a.createElement(Qe,null,p.a.createElement(G,null,p.a.createElement(pe,null))))),p.a.createElement(Ce,null))}}]),e}(p.a.Component),Ue=Object(V.b)(function(t){return{data:t.data,player:t.player,ui:t.ui}},{setManager:function(t){return{type:"SET_MANAGER",payload:{manager:t}}},setCurrentTrack:D,setCurrentTrackList:Y,toggleCollapseHeader:function(){return{type:"TOGGLE_COLLAPSE_HEADER"}},toggleCollapseRoot:function(){return{type:"TOGGLE_COLLAPSE_ROOT"}},toggleCollapseSidebar:function(){return{type:"TOGGLE_COLLAPSE_SIDEBAR"}},toggleIsPlaying:M,seekNextTrack:W,seekPrevTrack:R,setIsPlaying:function(t){return{type:"SET_IS_PLAYING",payload:{isPlaying:t}}}})(Ke);b.Constants.isTest?function(){var t=document.createElement("jukebox");document.body.appendChild(t),h.a.render(p.a.createElement(ot,null),t)}():function(){var t=void 0,e=window;e.createJukebox=function(n){return new Promise(function(r,a){if(t)r(t);else{var o=document.createElement("jukebox");document.body.appendChild(o),h.a.render(p.a.createElement(V.a,{store:pt},p.a.createElement(Ue,{codeConfig:n,ref:function(n){t=Object(it.a)({},e.JUKEBOX||{},{elm:o}),r(t)}})),o)}})}}()},14:function(t,e){t.exports="data:image/png;base64,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sAUWFhZqMBh89rOtzc0aj8e1uLAw5anmz3g8ru3t7To6Ojrx31yzHxolWC1w48aN+vjx44mfv9/amuI0nKTb7dbi4mLTY8w1p4QtsLK6Wleu2BVtt3Z7zQOnDfNX0gLdbrfu3LnT9Bicotvt1vq6fdQ0wWqJ79bX68bNm02PwQkePXpUvZ4rKE0TrJbodDr15MmTuilardLpdOrR48e1vLLS9ChUVWdje3fc9BD833g8rvdbW7WxsXHq3Sou3/UbN+r+/fvV7/ebHoU/CVZLHR8f1+7ubu3//nsNh8M6HttN09Drdmux36/l5WUvlreQYAExXMMCYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEEOwgBiCBcQQLCCGYAExBAuIIVhADMECYggWEOO/jJ5izESHF+4AAAAASUVORK5CYII="},20:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="undefined"!==typeof window,a=r&&"?test"===window.location.search,o="staging"===Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_JUKEBOX_ENV||r&&window.location.pathname.includes("/staging/"),i=!o&&"development"===Object({NODE_ENV:"production",PUBLIC_URL:"."}).REACT_APP_JUKEBOX_ENV,c=a,u=i?"http://localhost:8080":"https://s3.amazonaws.com/mpaulweeks-jukebox",l=!(i||o)?"production":"staging",s=l+"/data",f=l+"/audio",p=l+"/image",d=l+"/web",h=u+"/"+s,b=u+"/"+f,g=u+"/"+p;e.Constants={isDev:i,isStaging:o,isTest:a,LogDebug:c,LocalDataRoot:"../../local",PlayerBuildPath:"../player/build",PlayerDistPath:"../player/dist",DataDirectory:s,AudioDirectory:f,ImageDirectory:p,WebDirectory:d,DataPath:h,AudioPath:b,ImagePath:g,CollectionFileName:"collection.min.json",InfoLookupFileName:"metaData.min.json"}},25:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(36),a=n(37),o=function(){function t(e,n,r){this.name=e,this.tracks=n,this.custom=r,r||this.tracks.sort(a.Track.compare),this.shuffled=t.shuffle(this.tracks),this.imageSrc=this.tracks.length?this.tracks[0].imageSrc:void 0,this.album=this.tracks.length?this.tracks[0].album||this.tracks[0].title:void 0,this.artist=this.tracks.length?this.tracks[0].artist:void 0}return t.shuffle=function(t){for(var e=t.concat(),n=[];e.length>0;){var r=Math.floor(Math.random()*e.length),a=e.splice(r,1)[0];n.push(a)}return n},t.compare=function(t,e){return t.name<e.name?-1:(t.name,e.name,1)},t.fromLookup=function(e,n,o){var i=n.trackIds.map(function(t){return a.Track.fromLookup(t,e)}).filter(r.notEmpty);return new t(n.name,i,!!o)},t.prototype.randomTrack=function(){var t=this.tracks;return t[Math.floor(Math.random()*t.length)]},t.prototype.jumpToTrack=function(t,e,n){var r=this.tracks,a=this.shuffled,o=t.shuffle?a:r,i=o.indexOf(e);return o[(o.length+i+n)%o.length]},t.prototype.nextTrack=function(t,e){return this.jumpToTrack(t,e,1)},t.prototype.prevTrack=function(t,e){return this.jumpToTrack(t,e,-1)},t}();e.Playlist=o},35:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),a=function(){return function(t,e,n){this.name=e,this.playlists=Object.keys(n).map(function(e){return r.Playlist.fromLookup(t,{name:e,trackIds:n[e]})})}}();e.PlaylistBrowser=a},36:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,o){function i(t){try{u(r.next(t))}catch(e){o(e)}}function c(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,c)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(c){o=[6,c],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.calcTimestamp=function(t){return""+String(t.getFullYear()).padStart(4,"0")+String(t.getMonth()+1).padStart(2,"0")+String(t.getDate()).padStart(2,"0")+String(t.getHours()).padStart(2,"0")+String(t.getMinutes()).padStart(2,"0")+String(t.getSeconds()).padStart(2,"0")},e.range=function(t){for(var e=[],n=0;n<t;n++)e.push(n);return e},e.asyncMap=function(t,e){return r(this,void 0,void 0,function(){var n,r,o;return a(this,function(a){switch(a.label){case 0:n=[],r=0,a.label=1;case 1:return r<t.length?[4,e(t[r],r,t)]:[3,4];case 2:o=a.sent(),n.push(o),a.label=3;case 3:return r++,[3,1];case 4:return[2,n]}})})},e.notEmpty=function(t){return null!==t&&void 0!==t},e.truncate=function(t,e){return(t=t||"").length<e?t:t.substring(0,e-4)+" ..."}},37:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(20),a=function(){function t(t){var e=t.id,n=t.album,a=t.artist,o=t.title,i=t.year,c=t.duration,u=t.trackNumber,l=t.imageHash;this.id=e,this.album=n,this.artist=a,this.title=o,this.year=i,this.trackNumber=u,u&&(2===u.split("/").length?(this.trackNumerator=parseFloat(u.split("/")[0]),this.trackDenominator=parseFloat(u.split("/")[1])):u.includes("/")||(this.trackNumerator=parseFloat(u)),this.trackNumberDisplay=""+this.trackNumerator),this.durationDisplay=c?Math.floor(c/1e3/60)+":"+String(Math.floor(c/1e3%60)).padStart(2,"0"):"",this.sortKey=this.album+" "+String(this.trackNumerator||0).padStart(4,"0"),this.audioSrc=r.Constants.AudioPath+"/"+e,this.imageSrc=l&&r.Constants.ImagePath+"/"+l}return t.compare=function(t,e){return t.sortKey<e.sortKey?-1:(t.sortKey,e.sortKey,1)},t.fromLookup=function(e,n){var r=n.get(e);return r||console.log("failed track lookup! ID:",e),r&&new t(r)},t}();e.Track=a},38:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.data=t}return t.default=function(){return new t({playlists:{},tracks:{},images:{}})},t.prototype.containsTrack=function(t){return!!this.data.tracks[t]},t.prototype.containsImage=function(t){return!!this.data.images[t]},t}();e.Collection=r},39:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,o){function i(t){try{u(r.next(t))}catch(e){o(e)}}function c(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,c)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(c){o=[6,c],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},o=this;Object.defineProperty(e,"__esModule",{value:!0});var i=n(38),c=n(20),u=n(40),l=function(t,e){return r(o,void 0,void 0,function(){var n;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch((a=c.Constants.DataPath+"/"+e,a+"?v="+(new Date).getTime()))];case 1:return[4,r.sent().json()];case 2:return n=r.sent(),[2,new t(n)];case 3:return r.sent(),[2,t.default()];case 4:return[2]}var a})})};e.fetchCollection=function(){return r(o,void 0,void 0,function(){return a(this,function(t){return[2,l(i.Collection,c.Constants.CollectionFileName)]})})},e.fetchInfoLookup=function(){return r(o,void 0,void 0,function(){return a(this,function(t){return[2,l(u.InfoLookup,c.Constants.InfoLookupFileName)]})})}},4:function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(35)),r(n(38)),r(n(20)),r(n(39)),r(n(40)),r(n(41)),r(n(60)),r(n(42)),r(n(25)),r(n(96)),r(n(36)),r(n(37)),r(n(100))},40:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.data=t}return t.default=function(){return new t({})},t.prototype.containsTrack=function(t){return!!this.get(t)},t.prototype.get=function(t){return this.data[t]},t}();e.InfoLookup=r},41:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(20),a=function(){function t(){}return t.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.Constants.LogDebug&&console.log.apply(console,t)},t.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log.apply(console,t)},t}();e.Logger=a},42:function(t,e,n){"use strict";(function(t){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,o){function i(t){try{u(r.next(t))}catch(e){o(e)}}function c(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,c)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(c){o=[6,c],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(26)),c=o(n(64)),u=o(n(65)),l=o(n(75)),s=n(41),f=function(){function e(){}return e.dataUrl=function(t){var e=t.imageFormat,n=t.imageBuffer;return e&&n?"data:image/"+e+";base64,"+n.toString("base64"):null},e.fromBuffer=function(t){return r(this,void 0,void 0,function(){var e,n,r=this;return a(this,function(a){switch(a.label){case 0:return[4,this.tryParseNodeId3(t).catch(function(){return r.tryParseJsMediaTags(t)}).catch(function(){return{album:"Unknown Album",artist:"Unknown Artist",title:"Unknown Title",year:"????",duration:0,trackNumber:void 0,imageSrc:void 0}})];case 1:e=a.sent();try{n=c.default(t),e.duration=n}catch(o){s.Logger.log("error during duration calc:",o)}return[2,e]}})})},e.fromUrl=function(e){return r(this,void 0,void 0,function(){var n,r;return a(this,function(a){switch(a.label){case 0:return[4,fetch(e)];case 1:return[4,a.sent().arrayBuffer()];case 2:return n=a.sent(),r=t.from(n),[2,this.fromBuffer(r)]}})})},e.fromFile=function(t){return r(this,void 0,void 0,function(){var e=this;return a(this,function(n){return[2,new Promise(function(n,r){i.default.readFile(t,function(t,a){if(t)s.Logger.debug("error reading meta:",t),r(t);else{var o=e.fromBuffer(a);n(o)}})})]})})},e.tryParseNodeId3=function(t){return new Promise(function(e,n){var r=l.default.read(t);s.Logger.debug("node-id3:",r),r.image?e({album:r.album,artist:r.artist,title:r.title,year:r.year,duration:0,trackNumber:void 0===r.trackNumber?void 0:String(r.trackNumber),imageFormat:r.image.mime,imageBuffer:r.image.imageBuffer}):(s.Logger.debug("node-id3 error:",r),n())})},e.tryParseJsMediaTags=function(e){return new Promise(function(n,r){u.default.read(e,{onSuccess:function(e){var r,a=e.tags;if(s.Logger.debug("jsmediatags:",a),a.picture){var o=a.picture.data.map(function(t){return String.fromCharCode(t)}).join("");r=t.from(o,"binary")}n({album:a.album,artist:a.artist,title:a.title,year:a.year,duration:0,trackNumber:void 0===a.track?void 0:String(a.track),imageFormat:a.picture&&a.picture.format,imageBuffer:r})},onError:function(t){s.Logger.debug("jsmediatags error:",t),r(t)}})})},e}();e.MetaLoader=f}).call(this,n(13).Buffer)},53:function(t,e,n){t.exports=n(111)},60:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,o){function i(t){try{u(r.next(t))}catch(e){o(e)}}function c(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,c)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(c){o=[6,c],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(35),c=n(39),u=n(25),l=function(){function t(t,e,n){this.webConfig=t,this.collection=e,this.infoLookup=n;var a=t.PlaylistWhitelist,o={},c=Object.keys(e.data.playlists).filter(function(t){return!a||a.includes(t)}).map(function(t){var a=e.data.playlists[t];return o=r({},o,a.trackIds.reduce(function(t,e){return t[e]=!0,t},{})),u.Playlist.fromLookup(n,a,!0)});c.sort(u.Playlist.compare),this.playlists=c;var l=u.Playlist.fromLookup(n,{name:"All Songs",trackIds:Object.keys(a?o:e.data.tracks)}),s={},f={};l.tracks.forEach(function(t){s[t.album]=(s[t.album]||[]).concat(t.id),f[t.artist]=(f[t.artist]||[]).concat(t.id)}),this.allSongs=l,this.browseAlbums=new i.PlaylistBrowser(n,"Albums",s),this.browseArtists=new i.PlaylistBrowser(n,"Artists",f)}return t.fetch=function(e){return a(this,void 0,void 0,function(){var n,r;return o(this,function(a){switch(a.label){case 0:return[4,c.fetchCollection()];case 1:return n=a.sent(),[4,c.fetchInfoLookup()];case 2:return r=a.sent(),[2,new t(e,n,r)]}})})},t}();e.Manager=l},94:function(t,e){},95:function(t,e){},96:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,o){function i(t){try{u(r.next(t))}catch(e){o(e)}}function c(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,c)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(c){o=[6,c],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(97)),c=n(20),u=n(42),l=function(){function t(){}return t.compileTrackData=function(t,e){return{album:e.album,artist:e.artist,title:e.title,year:e.year,duration:e.duration,trackNumber:e.trackNumber,imageFormat:e.imageFormat,id:t,updated:new Date,imageHash:e.imageBuffer&&i.default(e.imageBuffer)}},t.fromId=function(t){return r(this,void 0,void 0,function(){var e,n;return a(this,function(r){switch(r.label){case 0:return e=c.Constants.AudioPath+"/"+t,[4,u.MetaLoader.fromUrl(e)];case 1:return n=r.sent(),[2,this.compileTrackData(t,n)]}})})},t}();e.SongLoader=l}},[[53,2,1]]]);
//# sourceMappingURL=main.9248e762.chunk.js.map